{"version":3,"file":"js/802.9fc7a746.js","mappings":"mGAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,CAAM,C,srBCyCjB,MAAMI,GAAQC,EAAAA,EAAAA,MACRN,EAAQO,EAMRC,GAAWC,EAAAA,EAAAA,IAAI,IACfC,EAAmBA,KACvB,IAAIC,EAAQ,CACV,QAAWX,EAAMY,OAAOC,QACxB,UAAab,EAAMY,OAAOE,WAC1B,QAAWd,EAAMY,OAAOG,SACxB,UAAaV,EAAMW,MAAMC,UACzB,SAAWjB,EAAMY,OAAOM,UAE1BC,EAAAA,EAAOC,KAAK,CAACC,KAAK,gBAAgBL,MAAOL,GAAO,E,OAGlDW,EAAAA,EAAAA,KAAUC,UACR,MAAMC,QAAaC,EAAAA,GAAAA,IAAgB,YAAa,CAC9C,OAAUzB,EAAMY,OAAOC,QACvB,UAAaR,EAAMW,MAAMU,UACzB,QAAWrB,EAAMW,MAAMW,UAGzBnB,EAASoB,MAAQJ,EAAKK,KAAKC,KAC3BC,QAAQC,IAAIR,EAAKK,MACjBE,QAAQC,IAAIxB,EAASoB,OACrB,MAAMK,QAAaR,EAAAA,GAAAA,IAAgB,iBAAkB,CACnD,OAAUzB,EAAMY,OAAOC,QACvB,UAAaR,EAAMW,MAAMU,UACzB,QAAWrB,EAAMW,MAAMW,UAEtBH,EAAKK,KAAKK,WAAa,IACxBlC,EAAMY,OAAOuB,WAAaX,EAAKK,KAAKK,WACpClC,EAAMY,OAAOsB,WAAaV,EAAKK,KAAKK,WAAa,MAEjDlC,EAAMY,OAAOuB,WAAaX,EAAKK,KAAKK,WACpClC,EAAMY,OAAOsB,WAAa,MAEzBV,EAAKK,KAAKO,YAAc,IACzBpC,EAAMY,OAAOyB,YAAcb,EAAKK,KAAKO,YACrCpC,EAAMY,OAAOwB,YAAcZ,EAAKK,KAAKO,YAAc,MAEnDpC,EAAMY,OAAOyB,YAAcb,EAAKK,KAAKO,YACrCpC,EAAMY,OAAOwB,YAAc,MAE7BpC,EAAMY,OAAOJ,SAAWgB,EAAKK,KAAKC,KAClC9B,EAAMY,OAAO0B,MAAQL,EAAKJ,KAAKU,QAAQ,IAEzCR,QAAQC,IAAIhC,EAAMY,OAAOyB,aACzBN,QAAQC,IAAIhC,EAAMY,OAAOuB,Y,6+DChGzB,MAAMK,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue/./src/views/TicketCard.vue","webpack://vue/./src/views/TicketCard.vue?fa89"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\r\n  <div @click=\"goToTicketDetail\">\r\n    <el-card class=\"ticket-card\" shadow=\"dark\">\r\n      <div class=\"ticket-info\">\r\n        <el-row class=\"component\">\r\n          <el-col :span=\"6\" class=\"ticket-time\">{{ ticket.start_time }}</el-col>\r\n          <el-col :span=\"6\" class=\"trip-no\">\r\n            <div class=\"underline-container\">\r\n              <span class=\"underline-text\">{{ ticket.train_id }}</span>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\" class=\"ticket-time\">{{ ticket.end_time }}</el-col>\r\n          <el-col :span=\"6\" class=\"ticket-price\">￥{{ ticket.price }}起</el-col>\r\n        </el-row>\r\n        <el-row class=\"component\">\r\n          <el-col :span=\"6\" class=\"ticket-place\">\r\n            <span v-if=\"ticket.departureHighlight\" class=\"highlight-orange-text\">始</span>{{ props.ticket.from_place }}\r\n          </el-col>\r\n          <el-col :span=\"6\" class=\"time\">{{ props.ticket.duration }}</el-col>\r\n          <!--TODO: 等后端完善，传入时间属性-->\r\n          <el-col :span=\"6\" class=\"ticket-place\">\r\n            <span v-if=\"ticket.arrivalHighlight\" class=\"highlight-green-text\">终</span>{{ props.ticket.to_place }}\r\n          </el-col>\r\n          <el-col :span=\"6\" class=\"availability\" v-if=\"props.ticket.firstSeats == '有座' || props.ticket.secondSeats == '有座' \">有票</el-col>\r\n          <el-col :span=\"6\" class=\"unavailability\" v-else>无票</el-col>\r\n        </el-row>\r\n      </div>\r\n      <template #footer>\r\n        <el-row>\r\n          <el-col :span=\"8\">\r\n            <span style=\"align-items: center\">二等：<span style=\"color:#42b983\">{{ ticket.secondSeats }}</span></span>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <span style=\"align-items: center\">一等：<span style=\"color:#42b983\">{{ ticket.firstSeats }}</span></span>\r\n          </el-col>\r\n                <el-col :span=\"8\">\r\n                  <span style=\"align-items: center\">商务：<span style=\"color:#42b983\">有座</span></span>\r\n          </el-col>\r\n        </el-row>\r\n      </template>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {defineProps, onMounted, ref} from 'vue';\r\nimport {useRoute} from 'vue-router';\r\nimport requestUtil from '@/util/request'\r\nimport router from \"@/router\";\r\n\r\nconst route = useRoute();\r\nconst props = defineProps({\r\n  ticket: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n});\r\nconst duration = ref(\"\");\r\nconst goToTicketDetail = () => {\r\n  let param = {\r\n    \"trip_id\": props.ticket.trip_id,\r\n    \"fromPlace\": props.ticket.from_place,\r\n    \"toPlace\": props.ticket.to_place,\r\n    \"startTime\": route.query.startTime,\r\n    \"train_id\":props.ticket.train_id\r\n  };\r\n  router.push({path:'/TicketDetail',query: param});\r\n}\r\n\r\nonMounted(async () => {\r\n  const res2 = await requestUtil.get('/trip/sum', {\r\n    \"tripId\": props.ticket.trip_id,\r\n    \"fromPlace\": route.query.fromPlace,\r\n    \"toPlace\": route.query.toPlace\r\n\r\n  });\r\n  duration.value = res2.data.time;\r\n  console.log(res2.data);\r\n  console.log(duration.value);\r\n  const res3 = await requestUtil.get('/trip/minPrice', {\r\n    \"tripId\": props.ticket.trip_id,\r\n    \"fromPlace\": route.query.fromPlace,\r\n    \"toPlace\": route.query.toPlace\r\n  })\r\n  if(res2.data.firstSeats < 20) {\r\n    props.ticket.first_seat = res2.data.firstSeats;\r\n    props.ticket.firstSeats = res2.data.firstSeats + \"张\";\r\n  }else{\r\n    props.ticket.first_seat = res2.data.firstSeats;\r\n    props.ticket.firstSeats = \"有座\";\r\n  }\r\n  if(res2.data.secondSeats < 20) {\r\n    props.ticket.second_seat = res2.data.secondSeats;\r\n    props.ticket.secondSeats = res2.data.secondSeats + \"张\";\r\n  }else{\r\n    props.ticket.second_seat = res2.data.secondSeats;\r\n    props.ticket.secondSeats = \"有座\";\r\n  }\r\n  props.ticket.duration = res2.data.time;\r\n  props.ticket.price = res3.data.minPrice;\r\n})\r\nconsole.log(props.ticket.second_seat);\r\nconsole.log(props.ticket.first_seat);\r\n</script>\r\n\r\n<style scoped>\r\n.ticket-card {\r\n  width: 95%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ticket-info {\r\n  padding: 0px;\r\n}\r\n\r\n.ticket-time {\r\n  text-align: center;\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n}\r\n\r\n.ticket-price {\r\n  text-align: center;\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n  color: #ff8800;\r\n}\r\n\r\n.ticket-place {\r\n  text-align: center;\r\n  font-weight: bold;\r\n  font-size: 20px;\r\n}\r\n\r\n.time {\r\n  text-align: center;\r\n  color: gray;\r\n  font-size: 15px;\r\n}\r\n\r\n.availability {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #12a72b;\r\n}\r\n\r\n.unavailability {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #e11a1a;\r\n}\r\n\r\n.el-row {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-row:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.el-col {\r\n  border-radius: 4px;\r\n}\r\n\r\n.grid-content {\r\n  border-radius: 4px;\r\n  min-height: 36px;\r\n}\r\n\r\n.highlight-orange-text {\r\n  background-color: orange;\r\n  color: white;\r\n  padding: 1px 4px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.highlight-green-text {\r\n  background-color: green;\r\n  color: white;\r\n  padding: 1px 4px;\r\n  border-radius: 5px;\r\n\r\n}\r\n\r\n@import \"@/assets/css/card-order.css\";\r\n</style>\r\n\r\n\r\n  ","import script from \"./TicketCard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TicketCard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TicketCard.vue?vue&type=style&index=0&id=0044b928&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0044b928\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","route","useRoute","__props","duration","ref","goToTicketDetail","param","ticket","trip_id","from_place","to_place","query","startTime","train_id","router","push","path","onMounted","async","res2","requestUtil","fromPlace","toPlace","value","data","time","console","log","res3","firstSeats","first_seat","secondSeats","second_seat","price","minPrice","__exports__"],"sourceRoot":""}