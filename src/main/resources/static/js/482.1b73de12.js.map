{"version":3,"file":"js/482.1b73de12.js","mappings":"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","sources":["webpack://vue/./src/util/cookie.js","webpack://vue/./src/views/user/UserInfo.vue","webpack://vue/./src/views/user/UserInfo.vue?848b"],"sourcesContent":["export function setCookie(name, value, days) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));\r\n    const expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = name + \"=\" + value + \";\" + expires + \";path=/\";\r\n}\r\n/*\r\n设置cookie\r\n */\r\nexport function getCookie(name) {\r\n    const cookieName = name + \"=\";\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n    const cookieArray = decodedCookie.split(';');\r\n    for (let i = 0; i < cookieArray.length; i++) {\r\n        let cookie = cookieArray[i];\r\n        while (cookie.charAt(0) === ' ') {\r\n            cookie = cookie.substring(1);\r\n        }\r\n        if (cookie.indexOf(cookieName) === 0) {\r\n            return cookie.substring(cookieName.length, cookie.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n/*\r\n获取cookie\r\n */\r\nexport function deleteCookie(cookieName) {\r\n    document.cookie = cookieName + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;';\r\n}\r\nexport function getCookieNum(){\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n    const cookieArray = decodedCookie.split(';');\r\n    return cookieArray.length;\r\n}\r\nexport default {\r\n    setCookie,getCookie,getCookieNum,deleteCookie\r\n}","<template>\r\n<!--  <div  class=\"mainCard\">-->\r\n  <el-card>\r\n    <div class=\"container\">\r\n      <div class=\"left-div\">\r\n        <!-- 左侧内容 -->\r\n          <div class=\"avatar-container\">\r\n              <div>\r\n                <el-avatar :size=\"200\"\r\n                           class=\"avatar\"\r\n                           :src=\"requestUtil.getServerUrl()+userInfo.avatar\"\r\n                           @click=\"dialogVisible = true\"/>\r\n                <div style=\"font-size: 20px;margin-top: 15px; cursor: pointer; color: #25a4bb;\" @click=\"dialogVisible = true\">点此处或图片更换头像</div>\r\n                <el-dialog v-model=\"dialogVisible\"\r\n                           title=\"更换头像\">\r\n                  <el-upload\r\n                      class=\"upload-demo\"\r\n                      action=\"http://localhost:1145/user/update/avatar\"\r\n                      :file-list=\"fileList\"\r\n                      :on-change=\"handleChange\"\r\n                      :http-request=\"customHttpRequest\"\r\n                      multiple\r\n                      drag\r\n                      :limit=\"3\"\r\n                      :on-exceed=\"handleExceed\"\r\n                      :auto-upload=\"false\">\r\n                    <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\r\n                    <div class=\"el-upload__text\">\r\n                      拖拽图片上传或 <em>点击这里上传</em>\r\n                    </div>\r\n                  </el-upload>\r\n                  <template #footer>\r\n                    <div class=\"dialog-footer\">\r\n                      <el-button @click=\"dialogVisible = false\">取消更换</el-button>\r\n                    </div>\r\n                  </template>\r\n                </el-dialog>\r\n              </div>\r\n          </div>\r\n      </div>\r\n      <div class=\"right-div\">\r\n                <el-card class=\"userCard\">\r\n                  <template #header>\r\n                    <div class=\"card-header\">\r\n                      <span>个人信息</span>\r\n                    </div>\r\n                  </template>\r\n                  <div class=\"card-content\">\r\n                    <p class=\"card-term\"><el-icon style=\"\"><User /></el-icon>用户名: {{ userInfo.user_name }}</p>\r\n<!--                    <p class=\"card-term\">昵称</p>-->\r\n                    <p class=\"card-term\"><el-icon><Money/></el-icon>账户余额：{{ userInfo.money }} <a style=\"cursor: pointer; margin-left: 5%;\" @click=\"payDialogVisible = true\">点击充值</a></p>\r\n                    <p class=\"card-term\"><el-icon><InfoFilled /></el-icon>用户类型: 用户</p>\r\n                    <p v-if=\"userInfo.email !== null\" class=\"card-term\"><el-icon><Message /></el-icon>邮箱：{{ userInfo.email }} <a style=\"cursor: pointer;margin-left: 5%\" @click=\"setEmail\">重新绑定邮箱</a></p>\r\n                    <p v-else class=\"card-term\"><el-icon><Message /></el-icon>邮箱：暂无 <a style=\"cursor: pointer;margin-left: 5%\" @click=\"setEmail\">点此设置邮箱</a></p>\r\n                    <p class=\"card-term\"><el-icon><Lock /></el-icon>密码：{{ password }}\r\n                      <div v-if=\"pwdVisible === false\" style=\"margin-left: 5%\">\r\n                        <el-icon @click=\"pwdShowed\"><Hide/></el-icon>\r\n                      </div>\r\n                      <div v-if=\"pwdVisible === true\" style=\"margin-left: 5%\">\r\n                        <el-icon @click=\"pwdHide\"><View/></el-icon>\r\n                      </div>\r\n                    </p>\r\n                    <el-dialog v-model=\"setEmailDialogVisible\"\r\n                               title=\"设置邮箱\"\r\n                               width=\"500\"\r\n                               align-center>\r\n                      <div class=\"component\">\r\n                        <el-input v-model=\"inputEmail\" placeholder=\"请输入邮箱\" style=\"width: 73%;\"/>\r\n                      </div>\r\n                      <div class=\"component\">\r\n                        <el-input v-model=\"emailValid\" placeholder=\"请输入验证码\" style=\"width: 40%\"></el-input>\r\n                        <el-button style=\"margin-left: 5%\" :disabled=\"disabled\" @click=\"getValid\">{{ btnText }}</el-button>\r\n                      </div>\r\n                      <template #footer>\r\n                        <el-button type=\"default\" @click=\"setEmailDialogVisible = false\">点击返回</el-button>\r\n                        <el-button type=\"primary\" @click=\"handleSetEmail\">绑定邮箱</el-button>\r\n                      </template>\r\n                    </el-dialog>\r\n                  </div>\r\n                </el-card>\r\n                <el-card class=\"userCard\">\r\n                  <template #header>\r\n                    <div class=\"card-header\">\r\n                      <span>账号管理</span>\r\n                    </div>\r\n                  </template>\r\n                  <div class=\"card-content\">\r\n                    <p class=\"card-term\" style=\"color: red; cursor: pointer\" @click=\"modifyPwdVisible = true\" >修改密码</p>\r\n                    <p class=\"card-term\" style=\"color: red; cursor: pointer\" @click=\"logoutVisible = true\" >退出登录</p>\r\n                    <el-dialog title=\"退出登录\"\r\n                               v-model=\"logoutVisible\">\r\n                      您确定要退出登录吗？\r\n                      <template #footer>\r\n                        <el-button type=\"primary\" @click=\"logoutVisible = false\">返回</el-button>\r\n                        <el-button type=\"default\" @click=\"handleLogout\">退出登录</el-button>\r\n                      </template>\r\n                    </el-dialog>\r\n                    <el-dialog v-model=\"payDialogVisible\" title=\"支付界面\">\r\n                      <div style=\"display: flex; justify-content: center; align-items: center;\">\r\n                        <img src=\"@/assets/images/pay.jpg\" style=\"height: 50%; width: 50%;\">\r\n                      </div>                      <el-input v-model=\"payment\" placeholder=\"请输入充值金额\"></el-input>\r\n                      <template #footer>\r\n                        <el-button type=\"primary\" @click=\"payDialogVisible = false\">返回</el-button>\r\n                        <el-button type=\"default\" @click=\"handlePay\">点击支付</el-button>\r\n                      </template>\r\n                    </el-dialog>\r\n                    <el-dialog title=\"修改密码\"\r\n                               v-model=\"modifyPwdVisible\" width=\"500\">\r\n                      <div class=\"component\">\r\n                        <el-input placeholder=\"请输入邮箱\" v-model=\"modifyEmail\" style=\"width: 73%;\"/>\r\n                      </div>\r\n                      <div class=\"component\">\r\n                      <el-input v-model=\"newValid\"placeholder=\"请输入验证码\" style=\"width: 40%\"></el-input>\r\n                      <el-button style=\"margin-left: 5%\" :disabled=\"disabled\" @click=\"getValid\">{{ btnText }}</el-button>\r\n                      </div>\r\n                      <div class=\"component\">\r\n                        <el-input placeholder=\"请输入新密码\" v-model=\"newPwd\" style=\"width: 73%\"/>\r\n                      </div>\r\n                      <div class=\"component\">\r\n                        <el-input placeholder=\"请再次输入新密码\" v-model=\"repeatNewPwd\" style=\"width: 73%\"/>\r\n                      </div>\r\n                      <template #footer>\r\n                        <el-button type=\"primary\" @click=\"modifyPwdVisible = false\">返回</el-button>\r\n                        <el-button type=\"default\" @click=\"handleModifyPwd\">确认修改</el-button>\r\n                      </template>\r\n                    </el-dialog>\r\n                  </div>\r\n                </el-card>\r\n<!--                <el-card class=\"userCard\">-->\r\n<!--                  <template #header>-->\r\n<!--                    <div class=\"card-header\">-->\r\n<!--                      <span>账户安全</span>-->\r\n<!--                    </div>-->\r\n<!--                  </template>-->\r\n<!--                  <div class=\"card-content\">-->\r\n<!--                    <p class=\"card-term\">验证邮箱</p>-->\r\n<!--                  </div>-->\r\n<!--                </el-card>-->\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n<script setup>\r\n  import requestUtil from \"@/util/request\"\r\n  import {onMounted, ref} from \"vue\";\r\n  import cookieUtil from \"@/util/cookie\"\r\n  import {ElMessage} from \"element-plus\";\r\n  import router from \"@/router\";\r\n  const userInfo = ref([]);\r\n  const dialogVisible = ref(false);\r\n  const imageUrl = ref('');\r\n  const inputEmail = ref('');\r\n  const emailValid = ref('');\r\n  const payDialogVisible = ref(false);\r\n  const disabled = ref(false);\r\n  const type = ref('');\r\n  const btnText = ref(\"获取验证码\");\r\n  const pwdVisible = ref(false);\r\n  const setEmailDialogVisible = ref(false);\r\n  const logoutVisible = ref(false);\r\n  const modifyPwdVisible = ref(false);\r\n  const modifyEmail = ref('');\r\n  const newPwd = ref('');\r\n  const repeatNewPwd = ref('');\r\n  const newValid = ref('');\r\n  const payment = ref('');\r\n  var version = Math.random();\r\n  const password = ref('*'.repeat(cookieUtil.getCookie(\"password\").length));\r\n  const handleLogout = () => {\r\n    try{\r\n      const rememberMe = cookieUtil.getCookie(\"rememberMe\");\r\n      if(!rememberMe) {\r\n        //如果登录选择不记住密码，则清除cookie\r\n        cookieUtil.deleteCookie(\"userName\");\r\n        cookieUtil.deleteCookie(\"userId\");\r\n        cookieUtil.deleteCookie(\"password\");\r\n        cookieUtil.deleteCookie(\"avatar\");\r\n      }\r\n      cookieUtil.setCookie(\"ifLogin\", false, 3600);\r\n      logoutVisible.value = false;\r\n      ElMessage({\r\n        message: \"退出成功！\",\r\n        type: \"success\"\r\n      })\r\n      setTimeout(()=>{\r\n        router.push('/login')\r\n      },500);\r\n    }catch (e) {\r\n      console.error(e);\r\n      ElMessage({\r\n        message: \"退出失败\",\r\n        type: \"warning\"\r\n      })\r\n    }\r\n  }\r\n  const handlePay = async()=> {\r\n    try{\r\n      console.log(payment.value);\r\n      const res = await requestUtil.get('/user/recharge',{\r\n        \"payment\": payment.value,\r\n        \"userId\": cookieUtil.getCookie(\"userId\")\r\n      });\r\n      if(res.data.msg == \"recharge success\") {\r\n        ElMessage({\r\n          message: \"支付成功！\",\r\n          type: \"success\"\r\n        });\r\n        setTimeout(function(){\r\n          location.reload();\r\n        },500);\r\n      }\r\n    }catch (e) {\r\n      ElMessage({\r\n        message: \"支付失败\",\r\n        type: \"error\"\r\n      })\r\n    }\r\n  }\r\n  const handleModifyPwd = async() => {\r\n    //TODO:验证输入合理性\r\n    if(newPwd.value === ''){\r\n      ElMessage({\r\n        type: \"warning\",\r\n        message: \"请输入新密码！\"\r\n      })\r\n    }\r\n    if(repeatNewPwd.value === ''){\r\n      ElMessage({\r\n        type: \"warning\",\r\n        message: \"请再次输入新密码！\"\r\n      })\r\n    }\r\n    if(newValid.value === ''){\r\n      ElMessage({\r\n        type: \"warning\",\r\n        message: \"请输入验证码！\"\r\n      })\r\n    }\r\n    if(newPwd.value !== repeatNewPwd.value) {\r\n      ElMessage({\r\n        type: \"warning\",\r\n        message: \"两次密码不一致！\"\r\n      })\r\n    }\r\n    //TODO:调用接口\r\n    try {\r\n      const res = await requestUtil.get('/user/modify/password', {\r\n        \"userId\": cookieUtil.getCookie(\"userId\"),\r\n        \"password\": newPwd.value\r\n      })\r\n      console.log(res);\r\n      ElMessage({\r\n        message: \"密码更新成功！\",\r\n        type: \"success\"\r\n      })\r\n      setTimeout(function(){\r\n        location.reload();\r\n      },500);\r\n    }catch (e) {\r\n      console.log(e);\r\n    }\r\n    //TODO:接受返回信息并输出到页面\r\n  }\r\n  const pwdShowed = () => {\r\n    pwdVisible.value = true;\r\n    password.value = userInfo.value.password;\r\n  }\r\n  const pwdHide = () => {\r\n    pwdVisible.value = false;\r\n    const hiddenPassword = '*'.repeat(password.value.length); // 创建与密码相同长度的星号字符串\r\n    password.value = hiddenPassword;\r\n  }\r\n  const setEmail = () => {\r\n    setEmailDialogVisible.value = true;\r\n  }\r\n  const getValid = () => {\r\n    alert(\"您的验证码是：1234\");\r\n    disabled.value = true;\r\n    let countDown = 60; // 设置倒计时时间，单位为秒\r\n\r\n    const timer = setInterval(() => {\r\n      countDown--;\r\n\r\n      if (countDown === 0) {\r\n        clearInterval(timer);\r\n        // 倒计时结束，启用按钮并重置文字\r\n        disabled.value = false;\r\n        btnText.value = '获取验证码';\r\n      } else {\r\n        // 更新按钮文字，显示倒计时\r\n        btnText.value = `${countDown}秒后重新获取`;\r\n        // console.log(countDown);\r\n      }\r\n    }, 1000); // 每隔一秒更新倒计时\r\n  }\r\n  const handleSetEmail = async () => {\r\n    try {\r\n      console.log(cookieUtil.getCookie(\"userId\"));\r\n      console.log(cookieUtil.getCookie(\"password\"));\r\n      console.log(inputEmail.value);\r\n      const res = await requestUtil.post('/user/set/email', {\r\n        \"userId\": cookieUtil.getCookie(\"userId\"),\r\n        \"password\": cookieUtil.getCookie(\"password\"),\r\n        \"userName\": cookieUtil.getCookie(\"userName\"),\r\n        \"email\": inputEmail.value\r\n      })\r\n      console.log(res);\r\n      if(res.data.msg === \"same email\"){\r\n        ElMessage({\r\n          message: \"请输入与之前不同的邮箱！\",\r\n          type: \"warning\"\r\n        })\r\n        return;\r\n      }\r\n      else if(res.data.msg === \"validate identity failed\") {\r\n        ElMessage({\r\n          message: \"身份验证失效；请重新登陆\",\r\n          type: \"warning\"\r\n        })\r\n        return;\r\n      }\r\n      else if(res.data.msg === \"set email success!\") {\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"绑定成功！\"\r\n        });\r\n        setTimeout(function (){\r\n          location.reload();\r\n        },500);\r\n      }else{\r\n        console.log(res);\r\n        return;\r\n      }\r\n\r\n      console.log(res);\r\n    }catch (e) {\r\n      console.error(e);\r\n      ElMessage({\r\n        type: \"warning\",\r\n        message: \"绑定失败！\"\r\n      })\r\n    }\r\n  }\r\n  const handleChange = async(file, fileList) => {\r\n    if (file.raw) {\r\n      const formData = new FormData();\r\n      formData.append('avatar', file.raw);\r\n      formData.append('userId', cookieUtil.getCookie(\"userId\"));\r\n      try {\r\n        const results = await requestUtil.fileUpload('user/update/avatar', formData);\r\n        imageUrl.value = results.data.imageUrl; // 更新imageUrl为上传成功后的图片URL\r\n        console.log(imageUrl);\r\n        ElMessage({\r\n          message: \"上传成功！\",\r\n          type: \"success\"\r\n        });\r\n        setTimeout(function() {\r\n          location.reload();\r\n        }, 500);\r\n      }catch (e) {\r\n        ElMessage({\r\n          message: \"上传失败！\",\r\n          type: \"warning\"\r\n        });\r\n      }\r\n\r\n\r\n    }\r\n  };\r\n  onMounted(async()=> {\r\n    try {\r\n      const res = await requestUtil.get('/user/select/userId', {\r\n        \"userId\": cookieUtil.getCookie(\"userId\")\r\n      })\r\n      userInfo.value = res.data;\r\n      console.log(res);\r\n      console.log(userInfo);\r\n      console.log(requestUtil.getServerUrl()+userInfo.value.avatar);\r\n    }catch (e){\r\n      console.error(e);\r\n    }\r\n    // console.log(userInfo);\r\n  })\r\n  //更新后，不仅要更新数据，还要更新cookie\r\n</script>\r\n<style>\r\n@import \"@/assets/css/basic.css\";\r\n.container {\r\n  display: flex;\r\n}\r\n\r\n.left-div {\r\n  width: 40%;\r\n  display: flex;\r\n  justify-content: center; /* 水平居中 */\r\n  align-items: center; /* 垂直居中 */\r\n}\r\n\r\n.right-div {\r\n  width: 60%;\r\n}\r\n.userCard {\r\n  max-width: 90%;\r\n  margin-bottom: 1.5%;\r\n  margin-left: 5%;\r\n}\r\n\r\n.card-header {\r\n  font-size: 25px;\r\n}\r\n\r\n.card-content {\r\n  margin-left: 3%;\r\n}\r\n\r\n.card-term {\r\n  display: flex;\r\n  font-size: 20px;\r\n  margin-top: 3%;\r\n  margin-bottom: 1.5%;\r\n}\r\n.avatar {\r\n  cursor: pointer;\r\n}\r\n.avatar-container {\r\n  justify-content: center; /* 水平居中 */\r\n  align-items: center; /* 垂直居中 */\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import script from \"./UserInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserInfo.vue?vue&type=style&index=0&id=dc0fbf68&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["setCookie","name","value","days","d","Date","setTime","getTime","expires","toUTCString","document","cookie","getCookie","cookieName","decodedCookie","decodeURIComponent","cookieArray","split","i","length","charAt","substring","indexOf","deleteCookie","getCookieNum","userInfo","ref","dialogVisible","imageUrl","inputEmail","emailValid","payDialogVisible","disabled","btnText","pwdVisible","setEmailDialogVisible","logoutVisible","modifyPwdVisible","modifyEmail","newPwd","repeatNewPwd","newValid","payment","Math","random","password","repeat","cookieUtil","handleLogout","rememberMe","ElMessage","message","type","setTimeout","router","push","e","console","error","handlePay","async","log","res","requestUtil","data","msg","location","reload","handleModifyPwd","pwdShowed","pwdHide","hiddenPassword","setEmail","getValid","alert","countDown","timer","setInterval","clearInterval","handleSetEmail","handleChange","file","fileList","raw","formData","FormData","append","results","onMounted","avatar","__exports__"],"sourceRoot":""}