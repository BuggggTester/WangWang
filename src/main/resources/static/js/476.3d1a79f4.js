"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[476],{1241:function(e,t){t.A=(e,t)=>{const o=e.__vccOpts||e;for(const[n,a]of t)o[n]=a;return o}},476:function(e,t,o){o.r(t),o.d(t,{default:function(){return H}});o(4114);var n=o(6768),a=o(144),l=o(7477);const i={class:"s-canvas"},r=["width","height"];function s(e,t,o,a,l,s){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("canvas",{id:"s-canvas",width:o.contentWidth,height:o.contentHeight},null,8,r)])}var d={name:"SIdentity",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:30},backgroundColorMin:{type:Number,default:255},backgroundColorMax:{type:Number,default:255},colorMin:{type:Number,default:0},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:100},lineColorMax:{type:Number,default:255},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:31}},methods:{randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){let o=this.randomNum(e,t),n=this.randomNum(e,t),a=this.randomNum(e,t);return"rgb("+o+","+n+","+a+")"},drawPic(){let e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let o=0;o<this.identifyCode.length;o++)this.drawText(t,this.identifyCode[o],o);this.drawLine(t),this.drawDot(t)},drawText(e,t,o){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";let n=(o+1)*(this.contentWidth/(this.identifyCode.length+1)),a=this.randomNum(this.fontSizeMax,this.contentHeight-5);var l=this.randomNum(-45,45);e.translate(n,a),e.rotate(l*Math.PI/180),e.fillText(t,0,0),e.rotate(-l*Math.PI/180),e.translate(-n,-a)},drawLine(e){for(let t=0;t<5;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<80;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},u=o(1241);const c=(0,u.A)(d,[["render",s],["__scopeId","data-v-364d9879"]]);var h=c,m=o(9325),p=o(8073);const f={class:"register-page"},g=(0,n.Lk)("div",{class:"background-image"},null,-1),v={class:"register-container"},y=(0,n.Lk)("span",{class:"register"},"注册",-1),b={class:"component"},x=(0,n.Lk)("span",{class:"demonstration"},"请输入昵称",-1),k={class:"component"},C=(0,n.Lk)("span",{class:"demonstration"},"请输入密码",-1),w={class:"component"},M=(0,n.Lk)("span",{class:"demonstration"},"请重新输入",-1),N={class:"component",style:{display:"flex","align-items":"center","margin-left":"20%"}},L=(0,n.Lk)("span",{class:"demonstration"},"请输入验证码",-1),R={class:"component",style:{display:"flex","justify-content":"center"}},V="1234567890";var S={__name:"Register",setup(e){const t=(0,a.KR)(""),o=(0,a.KR)(""),i=(0,a.KR)(""),r=((0,a.KR)(""),(0,a.KR)("")),s=(0,a.KR)(""),d=((0,a.KR)([]),(e,t)=>Math.floor(Math.random()*(t-e)+e)),u=()=>{r.value="",c(V,4)},c=(e,t)=>{for(let o=0;o<t;o++)r.value+=V[d(0,V.length)];console.log("验证码",r.value)},S=()=>""===s.value?(alert("请输入验证码"),!1):r.value!==s.value?(s.value="",u(),alert("请输入正确的验证码"),!1):(console.log("验证码正确"),!0);(0,n.sV)((()=>{r.value="",c(V,4)}));const W=async()=>{if(t.value.length<=1)return alert("请输入昵称"),!1;if(o.value.length<=1)return alert("请输入密码"),!1;if(o.value!==i.value)return alert("两次输入不一致！"),!1;if(!1===S())return!1;const e={userName:t.value,password:o.value,age:"1"};try{await p.bE("/user/create",e).then((e=>{alert("注册成功！"),m.A.push("/login")}))}catch(n){console.error(n)}return!0};return(e,d)=>{const c=(0,n.g2)("el-input"),p=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)("div",f,[g,(0,n.Lk)("div",v,[y,(0,n.Lk)("div",b,[x,(0,n.bF)(c,{modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=e=>t.value=e),placeholder:"请输入昵称",style:{width:"50%",height:"40px","padding-left":"5%"},"prefix-icon":(0,a.R1)(l.User),clearable:"true"},null,8,["modelValue","prefix-icon"])]),(0,n.Lk)("div",k,[C,(0,n.bF)(c,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=e=>o.value=e),placeholder:"6-20位，需包含数字、特殊字符、字母中至少两种",style:{width:"50%",height:"40px","padding-left":"5%"},"prefix-icon":(0,a.R1)(l.User),type:"password","show-password":"true"},null,8,["modelValue","prefix-icon"])]),(0,n.Lk)("div",w,[M,(0,n.bF)(c,{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=e=>i.value=e),placeholder:"请再次输入密码",style:{width:"50%",height:"40px","padding-left":"5%"},"prefix-icon":(0,a.R1)(l.User),type:"password","show-password":"true"},null,8,["modelValue","prefix-icon"])]),(0,n.Lk)("div",N,[L,(0,n.bF)(c,{modelValue:s.value,"onUpdate:modelValue":d[3]||(d[3]=e=>s.value=e),placeholder:"请输入验证码",style:{width:"30%",height:"40px","padding-left":"5%"},"prefix-icon":(0,a.R1)(l.User),type:"password","show-password":"true"},null,8,["modelValue","prefix-icon"]),(0,n.Lk)("div",{class:"login-code",onClick:u,style:{"margin-left":"10px"}},[(0,n.bF)(h,{identifyCode:r.value},null,8,["identifyCode"])])]),(0,n.Lk)("div",R,[(0,n.bF)(p,{type:"primary",class:"register-container-button",onClick:W},{default:(0,n.k6)((()=>[(0,n.eW)("注册")])),_:1}),(0,n.bF)(p,{type:"primary",class:"register-container-button",onClick:d[4]||(d[4]=e=>(0,a.R1)(m.A).push("/login"))},{default:(0,n.k6)((()=>[(0,n.eW)("返回登录页面")])),_:1})])])])}}};const W=S;var H=W}}]);
//# sourceMappingURL=476.3d1a79f4.js.map