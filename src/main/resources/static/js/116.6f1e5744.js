"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[116],{7488:function(e,o,t){function s(e,o,t){const s=new Date;s.setTime(s.getTime()+24*t*60*60*1e3);const a="expires="+s.toUTCString();document.cookie=e+"="+o+";"+a+";path=/"}function a(e){const o=e+"=",t=decodeURIComponent(document.cookie),s=t.split(";");for(let a=0;a<s.length;a++){let e=s[a];while(" "===e.charAt(0))e=e.substring(1);if(0===e.indexOf(o))return e.substring(o.length,e.length)}return""}function l(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;"}function r(){const e=decodeURIComponent(document.cookie),o=e.split(";");return o.length}o.Ay={setCookie:s,getCookie:a,getCookieNum:r,deleteCookie:l}},4116:function(e,o,t){t.r(o),t.d(o,{default:function(){return b}});t(4114);var s=t(6768),a=t(5130),l=t(144),r=t(9325),u=t(8073),n=t(1219),i=t(7488);const d={class:"login-page"},m=(0,s.Lk)("h1",{class:"title"},"登录",-1),c=(0,s.Lk)("span",{class:"toLogin"},"忘记密码？",-1),p=(0,s.Lk)("span",null,"登 录",-1),g=(0,s.Lk)("span",null,"注 册",-1);var k={__name:"Login",setup(e){const o=(0,l.KR)(null),t=i.Ay.getCookie("userName"),k=i.Ay.getCookie("password"),f=i.Ay.getCookie("rememberMe");console.log(f);const b=(0,l.KR)({username:t,password:k,rememberMe:f}),y=(0,l.KR)({account:[{required:!0,trigger:"blur",message:"请输入您的账号"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}]}),v=()=>{o.value.validate((async e=>{if(e){const e=await u.Ay.post("/user/login",{userName:b.value.username,password:b.value.password});console.log(e),b.value.rememberMe?(i.Ay.setCookie("userName",b.value.username,3),i.Ay.setCookie("userId",e.data.userId,3),i.Ay.setCookie("password",e.data.password,3),i.Ay.setCookie("rememberMe",b.value.rememberMe,3),i.Ay.setCookie("ifLogin",!0,3)):(i.Ay.setCookie("userName",b.value.username,1),i.Ay.setCookie("userId",e.data.userId,1),i.Ay.setCookie("password",e.data.password,1),i.Ay.setCookie("rememberMe",b.value.rememberMe,1),i.Ay.setCookie("ifLogin",!0,1)),"login success"===e.data.msg?((0,n.nk)({message:"登陆成功！",type:"success"}),await r.A.push("/main")):(0,n.nk)({message:"登录失败，用户名或密码错误",type:"warning"})}}))},C=()=>{r.A.push("/register")};return(e,t)=>{const l=(0,s.g2)("svg-icon"),r=(0,s.g2)("el-input"),u=(0,s.g2)("el-form-item"),n=(0,s.g2)("el-checkbox"),i=(0,s.g2)("el-button"),k=(0,s.g2)("el-form");return(0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(k,{ref_key:"loginRef",ref:o,model:b.value,rules:y.value,class:"login-form"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{prop:"username"},{default:(0,s.k6)((()=>[m,(0,s.bF)(r,{modelValue:b.value.username,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value.username=e),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:(0,s.k6)((()=>[(0,s.bF)(l,{icon:"user"})])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(u,{style:{width:"100%"}},{default:(0,s.k6)((()=>[(0,s.bF)(r,{modelValue:b.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>b.value.password=e),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:(0,a.jR)(v,["enter"])},{prefix:(0,s.k6)((()=>[(0,s.bF)(l,{icon:"password"})])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.bF)(n,{modelValue:b.value.rememberMe,"onUpdate:modelValue":t[2]||(t[2]=e=>b.value.rememberMe=e)},{default:(0,s.k6)((()=>[(0,s.eW)("记住密码")])),_:1},8,["modelValue"]),c])),_:1}),(0,s.bF)(u,{style:{width:"100%"}},{default:(0,s.k6)((()=>[(0,s.bF)(i,{size:"large",type:"primary",style:{width:"40%","margin-left":"5%"},onClick:(0,a.D$)(v,["prevent"])},{default:(0,s.k6)((()=>[p])),_:1}),(0,s.bF)(i,{size:"large",type:"default",style:{width:"40%","margin-left":"10%"},onClick:(0,a.D$)(C,["prevent"])},{default:(0,s.k6)((()=>[g])),_:1})])),_:1})])),_:1},8,["model","rules"])])}}};const f=k;var b=f}}]);
//# sourceMappingURL=116.6f1e5744.js.map