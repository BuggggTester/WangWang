{"version":3,"file":"js/854.2487ac2f.js","mappings":"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","sources":["webpack://vue/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue/./src/util/cookie.js","webpack://vue/./src/views/Hotel/HotelDetails.vue","webpack://vue/./src/views/Hotel/HotelDetails.vue?615f"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","export function setCookie(name, value, days) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));\r\n    const expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = name + \"=\" + value + \";\" + expires + \";path=/\";\r\n}\r\n/*\r\n设置cookie\r\n */\r\nexport function getCookie(name) {\r\n    const cookieName = name + \"=\";\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n    const cookieArray = decodedCookie.split(';');\r\n    for (let i = 0; i < cookieArray.length; i++) {\r\n        let cookie = cookieArray[i];\r\n        while (cookie.charAt(0) === ' ') {\r\n            cookie = cookie.substring(1);\r\n        }\r\n        if (cookie.indexOf(cookieName) === 0) {\r\n            return cookie.substring(cookieName.length, cookie.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n/*\r\n获取cookie\r\n */\r\nexport function deleteCookie(cookieName) {\r\n    document.cookie = cookieName + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;';\r\n}\r\nexport function getCookieNum(){\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n    const cookieArray = decodedCookie.split(';');\r\n    return cookieArray.length;\r\n}\r\nexport default {\r\n    setCookie,getCookie,getCookieNum,deleteCookie\r\n}","<script setup>\r\nimport { ref, onMounted, watch, computed } from 'vue';\r\nimport requestUtil from \"@/util/request\"\r\nimport cookieUtil from \"@/util/cookie\"\r\nimport {useRoute} from \"vue-router\";\r\nimport {getServerUrl} from \"@/util/request\";\r\nimport router from \"@/router\";\r\n\r\n// document.getElementsByClassName(\"main\").style['padding'] = '0px';\r\n// 使用 ref 创建响应式数据\r\nconst searchAddress = ref('');\r\nconst defaultTime = new Date(2000, 1, 1, 12, 0, 0)\r\nconst startTime = ref(\"2024-06-09\")\r\nconst endTime = ref(\"2024-06-10\")\r\nconst hotel = ref({\r\n  image: require('@/assets/images/carousel/image1.png'),\r\n  rating: 4.9,\r\n  name: \"北京第十四酒店\",\r\n  description: \"北京第十四家酒店，不是北京第四十号酒店，也不是北京第四十四号酒店。\",\r\n  price: 329.15,\r\n})\r\nconst route = useRoute();\r\nconst hotel_id = ref(route.query.hotel_id);\r\n\r\nconst rooms = ref([]); // 房间列表\r\n\r\nonMounted(async() => {\r\n  const res = await requestUtil.get('/hotels/'+ hotel_id.value);\r\n  hotel.value = res.data;\r\n\r\n\r\n  const res_room = await requestUtil.post('/hotels/hotel/getRoom', {\r\n    \"hotelId\": hotel_id.value,\r\n    \"startDate\": startTime.value,\r\n    \"endDate\": endTime.value,\r\n  })\r\n  rooms.value = res_room.data;\r\n\r\n})\r\n\r\n\r\nconst tableScrollY = ref(300); // 表格滚动高度\r\n\r\n// 使用 defineEmits 定义事件\r\nconst emit = defineEmits(['sort-change', 'view-details']);\r\n\r\n// 定义方法\r\nconst handleSearchRoom = async () => {\r\n  const res_room = await requestUtil.post('/hotels/hotel/getRoom', {\r\n    \"hotelId\": hotel_id.value,\r\n    \"startDate\": startTime.value,\r\n    \"endDate\": endTime.value,\r\n  })\r\n  rooms.value = res_room.data;\r\n};\r\n\r\nconst handleScroll = (event) => {\r\n  const scrollElement = event.target;\r\n  if (scrollElement.scrollHeight - scrollElement.scrollTop === scrollElement.clientHeight) {\r\n    // 滚动到底部时加载更多\r\n    console.log('Load more hotels');\r\n    // TODO: 加载更多酒店数据\r\n  }\r\n};\r\n\r\nconst handleBookRoom = async (room) => {\r\n  const res_id = await requestUtil.post('/hotels/book', {\r\n    \"userId\": cookieUtil.getCookie(\"userId\"),\r\n    \"hotelId\": hotel_id.value,\r\n    \"roomType\": room.room_type,\r\n    \"startDate\": startTime.value,\r\n    \"endDate\": endTime.value,\r\n  });\r\n  let reser_id = res_id.data.reservationId;\r\n  const order = await requestUtil.post('/totalorder/create', {\r\n    \"userId\": cookieUtil.getCookie(\"userId\"),\r\n    \"order_type\": \"HOTEL\",\r\n    \"reservation_id\": reser_id,\r\n    \"payment\": room.price,\r\n  });\r\n\r\n  try{\r\n    await router.push({path: '/hotelorderprepare', query:\r\n          {\"res_id\" : order.data.id, \"hotel_id\": hotel_id.value, \"room_type\": room.room_type}});\r\n  }catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nconst nameIs = (a) => {\r\n  if (a === \"SINGLE\") return \"单人间\"\r\n  else if (a === \"DOUBLE\") return \"双人间\"\r\n  else return \"套房\"\r\n};\r\n\r\nconst isDateCorrect = computed(() => {\r\n  let date1 = new Date(startTime.value);\r\n  let date2 = new Date(endTime.value);\r\n  if (date1 >= date2) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"home-box\">\r\n    <el-image style=\"width:100%;\" :fit=\"contain\" :src=\"require('@/assets/images/Hotel/topPic.jpg')\" class=\"hotel-page-image\" alt=\"顶部图片\" />\r\n    <div class=\"hotel-detail-page\">\r\n      <div class=\"hotel-name\">\r\n        <div>{{ hotel.name }}</div>\r\n      </div>\r\n\r\n      <div class=\"hotel-image-and-rate\">\r\n        <el-row>\r\n          <el-col :span=\"17\">\r\n            <el-image :fit=\"cover\" :src=\"getServerUrl() + hotel.picture_path\" class=\"hotel-image\" alt=\"酒店图片\" />\r\n          </el-col>\r\n          <el-col :span=\"7\">\r\n            <div class=\"hotel-class\">\r\n              <span class=\"rate-number\">{{ hotel.score }}</span>\r\n              <span class=\"rate-number-fen\">分</span>\r\n              <p class=\"hotel-description\">{{ hotel.description }}</p>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n\r\n      <div class=\"date-selector\">\r\n        <span class=\"demonstration\">从</span>\r\n        <el-date-picker\r\n            v-model=\"startTime\"\r\n            type=\"date\"\r\n            placeholder=\"选择入住时间\"\r\n            :default-time=\"defaultTime\"\r\n            style=\"padding-left: 2%; padding-right: 2%; width: 30%;\"\r\n            value-format=\"YYYY-MM-DD\"\r\n        />\r\n        <span class=\"demonstration\">到</span>\r\n        <el-date-picker\r\n            v-model=\"endTime\"\r\n            type=\"date\"\r\n            placeholder=\"选择离开时间\"\r\n            :default-time=\"defaultTime\"\r\n            style=\"padding-left: 2%; padding-right: 2%; width: 30%;\"\r\n            value-format=\"YYYY-MM-DD\"\r\n        />\r\n        <el-button\r\n            type=\"primary\"\r\n            style=\"margin-left: 3%\"\r\n            @click=\"handleSearchRoom\"\r\n        >查询</el-button>\r\n        <span\r\n            style=\"margin-left: 3%; color: red;\"\r\n            v-show=\"isDateCorrect\"\r\n        >\r\n          日期错误！\r\n        </span>\r\n      </div>\r\n      <div class=\"room-select\">\r\n        <div class=\"room-select-name\">\r\n          房型选择\r\n        </div>\r\n        <ul class=\"room-list\" style=\"overflow: auto\">\r\n          <li v-for=\"room in rooms\" class=\"list-room-item\">\r\n            <div class=\"room-card\" >\r\n              <el-row class=\"room-row\">\r\n                <el-col :span=\"6\">\r\n                  <el-image :fit=\"cover\" :src=\"room.image\" class=\"room-image\" alt=\"房间图片\" />\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <div class=\"room-info\">\r\n                    <h3 style=\"color: white; font-family: 微软雅黑; font-size: 24px; margin-bottom: 2%\">{{ nameIs(room.room_type) }}</h3>\r\n                    <p style=\"color: #adb1b9;\r\n                      font-family: 微软雅黑;\r\n                      font-size: 16px;\r\n                      margin-bottom: 2%;\r\n                      line-height: 24px\">{{ room.description }}</p>\r\n                  </div>\r\n                </el-col>\r\n                <el-col :span=\"3\">\r\n                  <div class=\"capable\">\r\n                    <span>剩余{{room.availableQuantity}}</span>\r\n                  </div>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                  <div class=\"price\">\r\n                    <span style=\"font-size: 14px\">￥</span>\r\n                    <span>{{ room.price }}</span>\r\n                  </div>\r\n                </el-col>\r\n                <el-col :span=\"3\">\r\n                  <div class=\"price-details\">\r\n                    <el-button style=\"margin-top: 15%\"\r\n                               size=\"large\"\r\n                               round\r\n                               type=\"danger\"\r\n                               @click=\"handleBookRoom(room)\"\r\n                               :disabled=isDateCorrect\r\n                    >预订</el-button>\r\n                  </div>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.home-box {\r\n  position: relative;\r\n  width: 102.9%;\r\n  height: 107%;\r\n  margin-top: -50px;\r\n  margin-left: -20px;\r\n  margin-right: -20px;\r\n  background-color: #101e41;\r\n  overflow: auto;\r\n}\r\n\r\n.hotel-detail-page {\r\n  padding: 0px;\r\n  margin-left: 5%;\r\n  margin-right: 5%;\r\n}\r\n\r\n.hotel-name {\r\n  font-family: 微软雅黑;\r\n  font-size: 40px;\r\n  margin-bottom: 3%;\r\n  margin-top: 2%;\r\n  color: #9eb5ff;\r\n  width:100%;\r\n  text-align: center;\r\n}\r\n\r\n.hotel-image-and-rate {\r\n  width: 100%;\r\n  height: 40%;\r\n  background: linear-gradient(#101e41, #1e2548);\r\n}\r\n\r\n.hotel-class {\r\n  font-size: 20px;\r\n  padding: 4%;\r\n  line-height: 30px;\r\n}\r\n\r\n.hotel-page-image {\r\n  width: 100%;\r\n  height: auto;\r\n  display: block;\r\n}\r\n\r\n.hotel-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: block;\r\n  border-radius: 4px;\r\n  border: 1px solid white;\r\n}\r\n\r\n.rate-number {\r\n  margin-left: 3%;\r\n  font-size: 35px;\r\n  color: #ff681d;\r\n  font-family: 微软雅黑;\r\n}\r\n\r\n.rate-number-fen {\r\n  margin-left: 3%;\r\n  font-size: 20px;\r\n  color: #ff681d;\r\n  font-family: 微软雅黑;\r\n}\r\n\r\n.hotel-description {\r\n  margin-left: 3%;\r\n  margin-top: 5%;\r\n  color: white;\r\n}\r\n\r\n.date-selector {\r\n  font-family: 微软雅黑;\r\n  font-size: 20px;\r\n  margin-top: 3%;\r\n  margin-bottom: 3%;\r\n}\r\n\r\n/deep/ .el-input__wrapper {\r\n  background-color: #6fa2a8;\r\n}\r\n\r\n/deep/ .el-input__inner {\r\n  color: #000000;\r\n}\r\n\r\n/deep/ .el-input__inner::placeholder {\r\n  color: #000000;\r\n}\r\n\r\n.demonstration {\r\n  color: #9eb5ff;\r\n}\r\n\r\n.room-select-name {\r\n  color: #9eb5ff;\r\n  font-family: 微软雅黑;\r\n  font-size: 24px;\r\n}\r\n\r\n.room-list {\r\n  overflow: auto;\r\n  width: 100%;\r\n}\r\n\r\n.list-room-item {\r\n  margin-bottom: 1%;\r\n}\r\n\r\n.room-row {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.room-image {\r\n  width: 100%;\r\n  height: auto;\r\n  display: block;\r\n  border-radius: 4px;\r\n}\r\n\r\n.room-card {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 13%;\r\n  margin-bottom: 1%;\r\n  padding: 2%;\r\n  background: linear-gradient(#101e41, #1e2548);\r\n}\r\n\r\n.room-card:hover {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 13%;\r\n  margin-bottom: 1%;\r\n  padding: 2%;\r\n  background: #141b3a;\r\n}\r\n\r\n.room-info {\r\n  margin-left: 3%;\r\n}\r\n\r\n.price-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 10px;\r\n  margin-top: 15%;\r\n}\r\n\r\n.price {\r\n  margin-top: 27%;\r\n}\r\n\r\n.price span {\r\n  font-size: 35px;\r\n  color: #ff681d;\r\n}\r\n\r\n.capable {\r\n  margin-top: 41%;\r\n  text-align: center;\r\n}\r\n\r\n.capable span {\r\n  font-size: 20px;\r\n  color: #ffffff;\r\n}\r\n\r\n.el-table {\r\n  overflow: auto; /* 允许横向滚动 */\r\n}\r\n</style>","import script from \"./HotelDetails.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HotelDetails.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HotelDetails.vue?vue&type=style&index=0&id=4d863ce6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4d863ce6\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","setCookie","name","value","days","d","Date","setTime","getTime","expires","toUTCString","document","cookie","getCookie","cookieName","decodedCookie","decodeURIComponent","cookieArray","split","i","length","charAt","substring","indexOf","deleteCookie","getCookieNum","ref","defaultTime","startTime","endTime","hotel","image","require","rating","description","price","route","useRoute","hotel_id","query","rooms","onMounted","async","res","requestUtil","data","res_room","handleSearchRoom","handleBookRoom","res_id","cookieUtil","room","room_type","reser_id","reservationId","order","router","push","path","id","e","console","error","nameIs","a","isDateCorrect","computed","date1","date2","__exports__"],"sourceRoot":""}