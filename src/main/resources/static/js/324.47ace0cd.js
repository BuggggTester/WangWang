"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[324],{1241:function(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[n,o]of t)a[n]=o;return a}},7488:function(e,t,a){function n(e,t,a){const n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);const o="expires="+n.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}function o(e){const t=e+"=",a=decodeURIComponent(document.cookie),n=a.split(";");for(let o=0;o<n.length;o++){let e=n[o];while(" "===e.charAt(0))e=e.substring(1);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return""}function s(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;"}function l(){const e=decodeURIComponent(document.cookie),t=e.split(";");return t.length}t.Ay={setCookie:n,getCookie:o,getCookieNum:l,deleteCookie:s}},1407:function(e,t,a){var n=a(8073);async function o(e,t,a,o){await n.Ay.post("message/create",{send:e,receive:t,title:a,body:o})}async function s(e){const t=await n.Ay.get("message/unreadnumberselect",{receive:e});return console.log(t.data),t.data}t.Ay={createMessage:o,getUnreadMessageNumber:s}},5935:function(e,t,a){function n(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",o=t.getDate()<10?"0"+t.getDate():t.getDate(),s=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",l=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",c=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+n+o+" "+s+l+c}function o(e){const t=new Date(e),a=("0"+t.getUTCHours()).slice(-2),n=("0"+t.getUTCMinutes()).slice(-2);return a+":"+n}function s(e){const t=new Date(e),a=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${a}月${n}日`}function l(){let e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return a=a<10?"0"+a:a,n=n<10?"0"+n:n,`${t}-${a}-${n}`}a.d(t,{Oc:function(){return o},YG:function(){return s},Yq:function(){return n}}),t.Ay={formatDate:n,stampToTime:o,formToDate:s,getCurrentTime:l}},3324:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});a(4114);var n=a(6768),o=a(4232),s=a(144),l=a(8073),c=a(1387),i=a(1219),r=(a(5935),a(7488)),u=a(9325),g=a(1407);const d=e=>((0,n.Qi)("data-v-6f0faa82"),e=e(),(0,n.jt)(),e),p={class:"home-box"},m={class:"hotel-prepare-page"},f=d((()=>(0,n.Lk)("div",{class:"info-card-name"},"订单信息",-1))),k={class:"info-card"},v={class:"hotel-info"},h={class:"term"},y=d((()=>(0,n.Lk)("span",{class:"term-name"},"酒店名称：",-1))),b={class:"term-content"},w={class:"term"},L=d((()=>(0,n.Lk)("span",{class:"term-name"},"房间类型：",-1))),_={class:"term-content"},C={class:"term"},x=d((()=>(0,n.Lk)("span",{class:"term-name"},"用户名称：",-1))),A={class:"term-content"},M=d((()=>(0,n.Lk)("div",{class:"user-info"},null,-1))),D={class:"pay-choice"},F=d((()=>(0,n.Lk)("div",{style:{"font-family":"微软雅黑","font-size":"30px",color:"#9eb5ff","margin-bottom":"2%"}},"请选择支付方式: ",-1))),T=d((()=>(0,n.Lk)("i",{class:"icon-wechat"},null,-1))),R=d((()=>(0,n.Lk)("i",{class:"icon-alipay"},null,-1))),S=d((()=>(0,n.Lk)("i",{class:"icon-bank"},null,-1))),U={class:"ticket-price"},K={class:"buttons"},V=d((()=>(0,n.Lk)("div",{class:"dialog-greeting"},"汪汪旅途提醒您：",-1))),$=d((()=>(0,n.Lk)("div",{class:"dialog-content"}," 您的订单已经创建，请您务必仔细看清您的订单信息是否正确，然后再进行支付哦！ ",-1)));var q={__name:"HotelOrderPrepare",setup(e){const t=(0,c.lq)(),d=(0,s.KR)(t.query.res_id),q=(0,s.KR)([]),I=(0,s.KR)(""),H=(0,s.KR)(!1),O=(0,s.KR)(t.query.hotel_id),N=(0,s.KR)([]),W=(0,s.KR)(""),Y=(0,s.KR)(t.query.room_type);(0,n.sV)((async()=>{const e=await l.Ay.get("/totalorder/get/"+d.value);q.value=e.data;const t=await l.Ay.get("/hotels/"+O.value);N.value=t.data,W.value=r.Ay.getCookie("userName"),console.log(q.value)}));const E=e=>"SINGLE"===e?"单人间":"DOUBLE"===e?"双人间":"套房",G=async()=>{""!=I.value?H.value=!0:(0,i.nk)({message:"请选择支付方式！",type:"warning"})},j=async()=>{await g.Ay.createMessage("汪汪旅途",r.Ay.getCookie("userId"),"酒店预订成功",`您在${N.value.name}预定房间成功，祝您旅途愉快，汪汪~`)},P=async()=>{await g.Ay.createMessage("汪汪旅途",r.Ay.getCookie("userId"),"酒店取消成功",`您在${N.value.name}预订房间已经取消，您没地方住了哦，祝您旅途愉快以及各种愉快，汪汪~`)},z=()=>{try{u.A.push({path:"/search/room",query:{hotel_id:O.value}})}catch(e){console.error(e)}},B=async()=>{if(""==I.value)return void(0,i.nk)({message:"请选择支付方式！",type:"warning"});const e=await l.Ay.get("/totalorder/confirm",{id:d.value}).then((t=>{console.log(t.data),console.log(e.data)})).catch((e=>{console.error(e)}));i.nk.success("预订成功"),await j(),H.value=!1},J=async()=>{await l.Ay.post("/totalorder/cancel",{id:d.value}).then((e=>{console.log(e.data)})).catch((e=>{console.error(e)}));i.nk.success("取消预订成功"),await P(),H.value=!1};return(e,t)=>{const s=(0,n.g2)("el-image"),l=(0,n.g2)("el-radio-button"),c=(0,n.g2)("el-radio-group"),i=(0,n.g2)("el-button"),r=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",p,[(0,n.bF)(s,{style:{width:"100%"},fit:e.contain,src:a(321),class:"hotel-page-image",alt:"顶部图片"},null,8,["fit","src"]),(0,n.Lk)("div",m,[f,(0,n.Lk)("div",k,[(0,n.Lk)("div",v,[(0,n.Lk)("div",h,[y,(0,n.Lk)("span",b,(0,o.v_)(N.value.name),1)]),(0,n.Lk)("div",w,[L,(0,n.Lk)("span",_,(0,o.v_)(E(Y.value)),1)]),(0,n.Lk)("div",C,[x,(0,n.Lk)("span",A,(0,o.v_)(W.value),1)])]),M]),(0,n.Lk)("div",D,[F,(0,n.bF)(c,{modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=e=>I.value=e),class:"selector"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{label:"wechat"},{default:(0,n.k6)((()=>[T])),_:1}),(0,n.bF)(l,{label:"alipay"},{default:(0,n.k6)((()=>[R])),_:1}),(0,n.bF)(l,{label:"bank"},{default:(0,n.k6)((()=>[S])),_:1})])),_:1},8,["modelValue"]),(0,n.Lk)("span",U,"支付总额：￥"+(0,o.v_)(q.value.payment),1)]),(0,n.Lk)("div",K,[(0,n.bF)(i,{onClick:G,type:"primary",style:{"margin-left":"20%","margin-top":"20px",height:"40px",width:"200px"}},{default:(0,n.k6)((()=>[(0,n.eW)("预定 ")])),_:1}),(0,n.bF)(i,{onClick:z,style:{"margin-left":"20%","margin-top":"20px",height:"40px",width:"200px"}},{default:(0,n.k6)((()=>[(0,n.eW)("取消 ")])),_:1})])]),(0,n.bF)(r,{modelValue:H.value,"onUpdate:modelValue":t[1]||(t[1]=e=>H.value=e)},{default:(0,n.k6)((()=>[V,$,(0,n.bF)(i,{onClick:B,type:"primary",style:{"margin-left":"15%","margin-top":"10px",height:"40px",width:"200px"}},{default:(0,n.k6)((()=>[(0,n.eW)("确认支付 ")])),_:1}),(0,n.bF)(i,{onClick:J,style:{"margin-left":"20%","margin-top":"10px",height:"40px",width:"200px"}},{default:(0,n.k6)((()=>[(0,n.eW)("取消订单 ")])),_:1})])),_:1},8,["modelValue"])])}}},I=a(1241);const H=(0,I.A)(q,[["__scopeId","data-v-6f0faa82"]]);var O=H},321:function(e,t,a){e.exports=a.p+"img/topPic.e3cb8f4d.jpg"}}]);
//# sourceMappingURL=324.47ace0cd.js.map