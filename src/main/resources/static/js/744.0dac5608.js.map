{"version":3,"file":"js/744.0dac5608.js","mappings":"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","sources":["webpack://vue/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue/./src/util/cookie.js","webpack://vue/./src/views/Hotel/SearchHotel.vue","webpack://vue/./src/views/Hotel/SearchHotel.vue?64c4"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","export function setCookie(name, value, days) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));\r\n    const expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = name + \"=\" + value + \";\" + expires + \";path=/\";\r\n}\r\n/*\r\n设置cookie\r\n */\r\nexport function getCookie(name) {\r\n    const cookieName = name + \"=\";\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n    const cookieArray = decodedCookie.split(';');\r\n    for (let i = 0; i < cookieArray.length; i++) {\r\n        let cookie = cookieArray[i];\r\n        while (cookie.charAt(0) === ' ') {\r\n            cookie = cookie.substring(1);\r\n        }\r\n        if (cookie.indexOf(cookieName) === 0) {\r\n            return cookie.substring(cookieName.length, cookie.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n/*\r\n获取cookie\r\n */\r\nexport function deleteCookie(cookieName) {\r\n    document.cookie = cookieName + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;';\r\n}\r\nexport function getCookieNum(){\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n    const cookieArray = decodedCookie.split(';');\r\n    return cookieArray.length;\r\n}\r\nexport default {\r\n    setCookie,getCookie,getCookieNum,deleteCookie\r\n}","<template>\r\n  <div class=\"home-box\">\r\n    <div class=\"hotel-search-container\">\r\n      <el-image style=\"width:100%;\" :fit=\"contain\" :src=\"require('@/assets/images/Hotel/topPic.jpg')\" class=\"hotel-image\" alt=\"顶部图片\" />\r\n      <!-- 搜索栏 -->\r\n      <el-row class=\"selector\">\r\n        <el-col :span=\"16\">\r\n          <div class=\"hotel-search-input\">\r\n            <el-input\r\n                placeholder=\"在附近寻找酒店\"\r\n                v-model=\"searchAddress\"\r\n                class=\"search-bar\"\r\n                suffix-icon=\"el-icon-search\"\r\n                @keyup.enter=\"handleSearch\"\r\n            >\r\n              <template #append>\r\n                <el-button icon=\"el-icon-search\" @click=\"handleSearch\">搜索酒店</el-button>\r\n              </template>\r\n            </el-input>\r\n          </div>\r\n        </el-col>\r\n\r\n      <!-- 筛选器栏 -->\r\n        <el-col :span=\"8\">\r\n          <div class=\"filter-bar\">\r\n            <el-select\r\n                v-model=\"selectedSort\"\r\n                placeholder=\"请选择排序方式\"\r\n                class=\"filter-item\"\r\n                @change=\"handleSortChange\"\r\n            >\r\n              <el-option label=\"价格最低\" value=\"price_asc\"></el-option>\r\n              <el-option label=\"价格最高\" value=\"price_desc\"></el-option>\r\n              <el-option label=\"评分最高\" value=\"rating_desc\"></el-option>\r\n            </el-select>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 无限滚动列表 -->\r\n      <ul v-if=\"ifempty\" v-infinite-scroll=\"handleScroll\" class=\"hotel-list\" style=\"overflow: auto\">\r\n        <li v-for=\"hotel in hotelsInfo\" class=\"infinite-list-item\">\r\n          <el-cards class=\"hotel-card\">\r\n            <el-row style=\"margin-top: 2%; margin-left: 1%; margin-right: 1%;\" class=\"hotel-row\">\r\n              <el-col :span=\"10\">\r\n                <el-image :fit=\"cover\" :src=\"getServerUrl() + hotel.picture_path\" class=\"hotel-image\" alt=\"酒店图片\" />\r\n              </el-col>\r\n              <el-col :span=\"9\">\r\n                <div class=\"hotel-info\">\r\n                  <h3 style=\"color: white; font-family: 微软雅黑; font-size: 25px; margin-bottom: 2%\">{{ hotel.name }}</h3>\r\n                  <div class=\"rating\">\r\n                    <el-rate\r\n                        v-model=\"hotel.score\"\r\n                        :colors=\"['#ffffff', '#F7BA2A', '#FF9900']\"\r\n                        :low-threshold=\"3\"\r\n                        :high-threshold=\"5\"\r\n                        show-score\r\n                        text-color=\"#ffffff\"\r\n                        disabled\r\n                    ></el-rate>\r\n                  </div>\r\n                  <p style=\"color: #9eb5ff;\r\n                      font-family: 微软雅黑;\r\n                      font-size: 16px;\r\n                      margin-bottom: 2%;\r\n                      line-height: 24px\">{{ hotel.address }}</p>\r\n                  <p style=\"color: #9eb5ff;\r\n                      font-family: 微软雅黑;\r\n                      font-size: 16px;\r\n                      margin-bottom: 2%;\r\n                      line-height: 24px\">{{ hotel.description }}</p>\r\n                </div>\r\n              </el-col>\r\n              <el-col :span=\"5\">\r\n                <div class=\"price-details\">\r\n                  <div class=\"price\">\r\n                    <span style=\"font-size: 14px\">￥</span>\r\n                    <span>{{ hotel.lowestPrice }}</span>\r\n                    <span style=\"font-size: 14px\">起</span>\r\n                  </div>\r\n                  <el-button style=\"margin-top: 7%\" size=\"large\" round type=\"primary\" @click=\"handleViewDetails(hotel)\">\r\n                    <div style=\"color:#000000; font-weight: bold\">查看详情</div>\r\n                  </el-button>\r\n                </div>\r\n              </el-col>\r\n            </el-row>\r\n          </el-cards>\r\n        </li>\r\n      </ul>\r\n      <div v-else style=\"margin-top:100px; text-align:center; line-height: 100px; font-size: 60px; color: white\">前面的内容，以后再来探索吧~</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch } from 'vue';\r\nimport requestUtil from \"@/util/request\"\r\nimport cookieUtil from \"@/util/cookie\"\r\nimport {getServerUrl} from \"@/util/request\";\r\nimport router from \"@/router\";\r\nimport {useRoute} from \"vue-router\";\r\nconst url = ref('');\r\nconst hotelsInfo = ref([]);\r\nconst hotels = ref([]);\r\nconst route = useRoute();\r\nconst address = ref(route.query.address);\r\nconst ifempty = ref(true)\r\nonMounted(async() => {\r\n  const res = await requestUtil.get(`/hotels/selectHotelByAddress`, {\r\n    \"address\": address.value\r\n  });\r\n  hotelsInfo.value = res.data;\r\n  url.value = res.data;\r\n  if(hotelsInfo.value.length === 0){\r\n    ifempty.value = false\r\n  }\r\n\r\n})\r\n\r\n// 使用 ref 创建响应式数据\r\nconst searchAddress = ref('');\r\nconst selectedSort = ref('price_asc'); // 默认排序方式\r\nconst tableScrollY = ref(300); // 表格滚动高度\r\n\r\n// 使用 defineEmits 定义事件\r\nconst emit = defineEmits(['sort-change', 'view-details']);\r\n\r\n// 定义方法\r\nconst handleSearch = async () => {\r\n  if (searchAddress.value === \"\") {\r\n    searchAddress.value = \"传奇机长\";\r\n  }\r\n  const hot = await requestUtil.get('/hotels/selectHotelByAddress', {\r\n    address: searchAddress.value\r\n  });\r\n  hotelsInfo.value = hot.data;\r\n\r\n  if(hotelsInfo.value.length === 0){\r\n    ifempty.value = false\r\n  } else {\r\n    ifempty.value = true\r\n  }\r\n\r\n  searchAddress.value = \"\";\r\n\r\n  console.log(hotelsInfo.value)\r\n};\r\n\r\nconst handleSortChange = async (value) => {\r\n  if (value === \"price_asc\") {\r\n    const hot = await requestUtil.get('/hotels/selectHotelByPriceASC', {\r\n      \"address\": searchAddress.value\r\n    });\r\n    hotelsInfo.value = hot.data;\r\n  } else if (value === \"price_desc\") {\r\n    const hot = await requestUtil.get('/hotels/selectHotelByPriceDESC', {\r\n      \"address\": searchAddress.value\r\n    });\r\n    hotelsInfo.value = hot.data;\r\n  } else if (value === \"rating_desc\") {\r\n    const hot = await requestUtil.get('/hotels/selectHotelByScore', {\r\n      \"address\": searchAddress.value\r\n    });\r\n    hotelsInfo.value = hot.data;\r\n  }\r\n};\r\n\r\nconst handleScroll = (event) => {\r\n\r\n  // const scrollElement = event.target;\r\n  // if (scrollElement.scrollHeight - scrollElement.scrollTop === scrollElement.clientHeight) {\r\n  //   // 滚动到底部时加载更多\r\n  //   console.log('Load more hotels');\r\n  //   // TODO: 加载更多酒店数据\r\n  // }\r\n  console.log('Load more hotels');\r\n};\r\n\r\nconst handleViewDetails = (hotel) => {\r\n  console.log(hotel.id);\r\n  try{\r\n    router.push({path: '/search/room', query:\r\n          {\"hotel_id\" : hotel.id}});\r\n  }catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.home-box {\r\n  position: relative;\r\n  width: 102.9%;\r\n  height: 107%;\r\n  margin-top: -50px;\r\n  margin-left: -20px;\r\n  margin-right: -20px;\r\n  background-color: #101e41;\r\n  overflow: auto;\r\n}\r\n\r\n.hotel-search-container {\r\n  padding: 0px;\r\n}\r\n\r\n.hotel-search-input {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  padding: 10px;\r\n  margin-left: 10%;\r\n}\r\n\r\n.selector {\r\n  margin-left: 15%;\r\n  width: 70%;\r\n}\r\n\r\n.hotel-list {\r\n  margin-left: 12.5%;\r\n  width: 75%;\r\n}\r\n\r\n.infinite-list-item {\r\n  margin-bottom: 1%;\r\n}\r\n\r\n.search-bar-text {\r\n  font-family: 微软雅黑;\r\n  font-size: 20px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.hotel-row {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.search-bar {\r\n  width: 70%;\r\n}\r\n\r\n.filter-bar {\r\n  margin-right: 20%;\r\n  text-align: right;\r\n  margin-top: 3%;\r\n}\r\n\r\n.filter-item {\r\n  width: 200px;\r\n}\r\n\r\n.hotel-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: block;\r\n  border-radius: 4px;\r\n}\r\n\r\n.hotel-card {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 280px;\r\n  background: linear-gradient(#101e41, #1e2548);\r\n}\r\n\r\n.hotel-card:hover {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 280px;\r\n  background: #141b3a;\r\n}\r\n\r\n.hotel-info {\r\n  margin-top: 3%;\r\n  margin-left: 3%;\r\n}\r\n\r\n.price-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 10px;\r\n  margin-top: 15%;\r\n}\r\n\r\n.price {\r\n  margin-top: 20%;\r\n}\r\n\r\n.el-main {\r\n  --el-main-padding: 0 !important;\r\n}\r\n.price span {\r\n  font-size: 35px;\r\n  color: #ff681d;\r\n}\r\n\r\n</style>","import script from \"./SearchHotel.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SearchHotel.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SearchHotel.vue?vue&type=style&index=0&id=0a40d127&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0a40d127\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","setCookie","name","value","days","d","Date","setTime","getTime","expires","toUTCString","document","cookie","getCookie","cookieName","decodedCookie","decodeURIComponent","cookieArray","split","i","length","charAt","substring","indexOf","deleteCookie","getCookieNum","url","ref","hotelsInfo","route","useRoute","address","query","ifempty","onMounted","async","res","requestUtil","data","searchAddress","selectedSort","handleSearch","hot","console","log","handleSortChange","handleScroll","event","handleViewDetails","hotel","id","router","push","path","e","error","__exports__"],"sourceRoot":""}