"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[711,802],{1241:function(t,e){e.A=(t,e)=>{const a=t.__vccOpts||t;for(const[s,c]of e)a[s]=c;return a}},5935:function(t,e,a){function s(t){var e=new Date(t),a=e.getFullYear()+"-",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",c=e.getDate()<10?"0"+e.getDate():e.getDate(),n=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",i=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",l=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return a+s+c+" "+n+i+l}function c(t){const e=new Date(t),a=("0"+e.getUTCHours()).slice(-2),s=("0"+e.getUTCMinutes()).slice(-2);return a+":"+s}function n(t){const e=new Date(t),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${a}月${s}日`}function i(){let t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return a=a<10?"0"+a:a,s=s<10?"0"+s:s,`${e}-${a}-${s}`}a.d(e,{Oc:function(){return c},YG:function(){return n},Yq:function(){return s}}),e.Ay={formatDate:s,stampToTime:c,formToDate:n,getCurrentTime:i}},1802:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});a(4114);var s=a(6768),c=a(4232),n=a(144),i=a(1387),l=a(8073),r=a(9325);const o=t=>((0,s.Qi)("data-v-0044b928"),t=t(),(0,s.jt)(),t),u={class:"ticket-info"},d={class:"underline-container"},k={class:"underline-text"},p={key:0,class:"highlight-orange-text"},f={key:0,class:"highlight-green-text"},_={style:{"align-items":"center"}},g={style:{color:"#42b983"}},m={style:{"align-items":"center"}},v={style:{color:"#42b983"}},y=o((()=>(0,s.Lk)("span",{style:{"align-items":"center"}},[(0,s.eW)("商务："),(0,s.Lk)("span",{style:{color:"#42b983"}},"有座")],-1)));var b={__name:"TicketCard",props:{ticket:{type:Object,required:!0}},setup(t){const e=(0,i.lq)(),a=t,o=(0,n.KR)(""),b=()=>{let t={trip_id:a.ticket.trip_id,fromPlace:a.ticket.from_place,toPlace:a.ticket.to_place,startTime:e.query.startTime,train_id:a.ticket.train_id};r.A.push({path:"/TicketDetail",query:t})};return(0,s.sV)((async()=>{const t=await l.Ay.get("/trip/sum",{tripId:a.ticket.trip_id,fromPlace:e.query.fromPlace,toPlace:e.query.toPlace});o.value=t.data.time,console.log(t.data),console.log(o.value);const s=await l.Ay.get("/trip/minPrice",{tripId:a.ticket.trip_id,fromPlace:e.query.fromPlace,toPlace:e.query.toPlace});t.data.firstSeats<20?(a.ticket.first_seat=t.data.firstSeats,a.ticket.firstSeats=t.data.firstSeats+"张"):(a.ticket.first_seat=t.data.firstSeats,a.ticket.firstSeats="有座"),t.data.secondSeats<20?(a.ticket.second_seat=t.data.secondSeats,a.ticket.secondSeats=t.data.secondSeats+"张"):(a.ticket.second_seat=t.data.secondSeats,a.ticket.secondSeats="有座"),a.ticket.duration=t.data.time,a.ticket.price=s.data.minPrice})),console.log(a.ticket.second_seat),console.log(a.ticket.first_seat),(e,n)=>{const i=(0,s.g2)("el-col"),l=(0,s.g2)("el-row"),r=(0,s.g2)("el-card");return(0,s.uX)(),(0,s.CE)("div",{onClick:b},[(0,s.bF)(r,{class:"ticket-card",shadow:"dark"},{footer:(0,s.k6)((()=>[(0,s.bF)(l,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{span:8},{default:(0,s.k6)((()=>[(0,s.Lk)("span",_,[(0,s.eW)("二等："),(0,s.Lk)("span",g,(0,c.v_)(t.ticket.secondSeats),1)])])),_:1}),(0,s.bF)(i,{span:8},{default:(0,s.k6)((()=>[(0,s.Lk)("span",m,[(0,s.eW)("一等："),(0,s.Lk)("span",v,(0,c.v_)(t.ticket.firstSeats),1)])])),_:1}),(0,s.bF)(i,{span:8},{default:(0,s.k6)((()=>[y])),_:1})])),_:1})])),default:(0,s.k6)((()=>[(0,s.Lk)("div",u,[(0,s.bF)(l,{class:"component"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{span:6,class:"ticket-time"},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(t.ticket.start_time),1)])),_:1}),(0,s.bF)(i,{span:6,class:"trip-no"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",d,[(0,s.Lk)("span",k,(0,c.v_)(t.ticket.train_id),1)])])),_:1}),(0,s.bF)(i,{span:6,class:"ticket-time"},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(t.ticket.end_time),1)])),_:1}),(0,s.bF)(i,{span:6,class:"ticket-price"},{default:(0,s.k6)((()=>[(0,s.eW)("￥"+(0,c.v_)(t.ticket.price)+"起",1)])),_:1})])),_:1}),(0,s.bF)(l,{class:"component"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{span:6,class:"ticket-place"},{default:(0,s.k6)((()=>[t.ticket.departureHighlight?((0,s.uX)(),(0,s.CE)("span",p,"始")):(0,s.Q3)("",!0),(0,s.eW)((0,c.v_)(a.ticket.from_place),1)])),_:1}),(0,s.bF)(i,{span:6,class:"time"},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(a.ticket.duration),1)])),_:1}),(0,s.bF)(i,{span:6,class:"ticket-place"},{default:(0,s.k6)((()=>[t.ticket.arrivalHighlight?((0,s.uX)(),(0,s.CE)("span",f,"终")):(0,s.Q3)("",!0),(0,s.eW)((0,c.v_)(a.ticket.to_place),1)])),_:1}),"有座"==a.ticket.firstSeats||"有座"==a.ticket.secondSeats?((0,s.uX)(),(0,s.Wv)(i,{key:0,span:6,class:"availability"},{default:(0,s.k6)((()=>[(0,s.eW)("有票")])),_:1})):((0,s.uX)(),(0,s.Wv)(i,{key:1,span:6,class:"unavailability"},{default:(0,s.k6)((()=>[(0,s.eW)("无票")])),_:1}))])),_:1})])])),_:1})])}}},h=a(1241);const S=(0,h.A)(b,[["__scopeId","data-v-0044b928"]]);var F=S},8711:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});a(4114);var s=a(6768),c=a(144),n=a(4232),i=a(7477),l=(a(9325),a(1802)),r=a(5935),o=a(8073),u=a(1387);const d={class:"head-trip-info"};var k={__name:"TicketInfo",setup(t){const e=(0,u.lq)(),a=(0,c.KR)(e.query.fromPlace),k=(0,c.KR)(e.query.toPlace),p=(0,c.KR)(e.query.startTime),f=(0,c.KR)([]);return(0,s.sV)((async()=>{console.log(a.value),console.log(k.value),console.log(p.value);const t=await o.Ay.post("/trip/select/place/time",{fromPlace:a.value,toPlace:k.value,startTime:p.value});f.value=t.data,f.value.forEach((t=>{t.start_time=r.Ay.stampToTime(t.start_time),t.end_time=r.Ay.stampToTime(t.end_time)})),console.log(f.value)})),(t,e)=>{const a=(0,s.g2)("el-page-header"),r=(0,s.g2)("el-col"),o=(0,s.g2)("el-row");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(a,{icon:(0,c.R1)(i.ArrowLeft),onBack:e[0]||(e[0]=e=>t.$router.push("/main"))},{content:(0,s.k6)((()=>[(0,s.Lk)("span",d,(0,n.v_)(t.$route.query.fromPlace)+" - "+(0,n.v_)(t.$route.query.toPlace),1)])),_:1},8,["icon"]),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.value,((t,e)=>((0,s.uX)(),(0,s.Wv)(r,{span:12,key:e},{default:(0,s.k6)((()=>[(0,s.bF)(l["default"],{ticket:t},null,8,["ticket"])])),_:2},1024)))),128))])),_:1})],64)}}},p=a(1241);const f=(0,p.A)(k,[["__scopeId","data-v-280bab5e"]]);var _=f}}]);
//# sourceMappingURL=711.9e5aaa72.js.map