"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[82],{1241:function(e,t){t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[l,a]of t)n[l]=a;return n}},7488:function(e,t,n){function l(e,t,n){const l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3);const a="expires="+l.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}function a(e){const t=e+"=",n=decodeURIComponent(document.cookie),l=n.split(";");for(let a=0;a<l.length;a++){let e=l[a];while(" "===e.charAt(0))e=e.substring(1);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return""}function s(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;"}function o(){const e=decodeURIComponent(document.cookie),t=e.split(";");return t.length}t.Ay={setCookie:l,getCookie:a,getCookieNum:o,deleteCookie:s}},5738:function(e,t,n){n.d(t,{A:function(){return A}});var l=n(6768),a=n(4232);const s=e=>((0,l.Qi)("data-v-5a85c12d"),e=e(),(0,l.jt)(),e),o={style:{display:"flex"}},i={style:{width:"80%"}},d={class:"component"},r={style:{"font-size":"larger",color:"#12a72b"}},u=s((()=>(0,l.Lk)("div",{class:"component"},[(0,l.Lk)("hr",{style:{color:"#6b778c"}})],-1))),c={class:"component"},p={class:"component"},g={style:{width:"20%",display:"flex","justify-content":"center","align-items":"center"}},k=s((()=>(0,l.Lk)("div",{class:"component"},[(0,l.Lk)("hr",{style:{color:"#6b778c"}})],-1))),m={class:"component"},y=s((()=>(0,l.Lk)("span",{style:{"margin-right":"2%"}},[(0,l.eW)("请输入姓名："),(0,l.Lk)("span",{style:{color:"red"}},"*")],-1))),v={class:"component"},f=s((()=>(0,l.Lk)("span",{style:{"margin-right":"2%"}},[(0,l.eW)("请输入手机号："),(0,l.Lk)("span",{style:{color:"red"}},"*")],-1))),h={class:"component"},b=s((()=>(0,l.Lk)("span",{style:{"margin-right":"2%"}},[(0,l.eW)("请输入身份证号："),(0,l.Lk)("span",{style:{color:"red"}},"*")],-1)));function L(e,t,n,s,L,w){const V=(0,l.g2)("el-col"),C=(0,l.g2)("el-row"),F=(0,l.g2)("EditPen"),_=(0,l.g2)("el-icon"),I=(0,l.g2)("el-card"),A=(0,l.g2)("el-input"),W=(0,l.g2)("el-button"),U=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(I,{style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",o,[(0,l.Lk)("div",i,[(0,l.Lk)("div",d,[(0,l.bF)(C,null,{default:(0,l.k6)((()=>[(0,l.bF)(V,{span:4},{default:(0,l.k6)((()=>[(0,l.Lk)("span",r,(0,a.v_)(n.passenger.name),1)])),_:1})])),_:1})]),u,(0,l.Lk)("div",c,[(0,l.bF)(C,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",null,"手机号: "+(0,a.v_)(n.passenger.phone_number),1)])),_:1})]),(0,l.Lk)("div",p,[(0,l.bF)(C,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",null,"身份证号: "+(0,a.v_)(s.maskedIdentity),1)])),_:1})])]),(0,l.Lk)("div",g,[(0,l.Lk)("div",{onClick:t[0]||(t[0]=e=>n.passenger.dialogVisible=!0)},[(0,l.bF)(_,{size:"40px",color:"gray"},{default:(0,l.k6)((()=>[(0,l.bF)(F)])),_:1})])])])])),_:1}),(0,l.bF)(U,{modelValue:n.passenger.dialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>n.passenger.dialogVisible=e),title:"修改乘车人信息"},{footer:(0,l.k6)((()=>[(0,l.bF)(W,{onClick:t[4]||(t[4]=e=>n.passenger.dialogVisible=!1),type:"default"},{default:(0,l.k6)((()=>[(0,l.eW)("返回")])),_:1}),(0,l.bF)(W,{onClick:s.handleModify,type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)("修改信息")])),_:1},8,["onClick"])])),default:(0,l.k6)((()=>[k,(0,l.Lk)("div",m,[y,(0,l.bF)(A,{modelValue:s.newName,"onUpdate:modelValue":t[1]||(t[1]=e=>s.newName=e),placeholder:"请输入名字",style:{width:"65%"}},null,8,["modelValue"])]),(0,l.Lk)("div",v,[f,(0,l.bF)(A,{modelValue:s.newPhone,"onUpdate:modelValue":t[2]||(t[2]=e=>s.newPhone=e),placeholder:"请输入手机号",style:{width:"63%"}},null,8,["modelValue"])]),(0,l.Lk)("div",h,[b,(0,l.bF)(A,{modelValue:s.newIdentity,"onUpdate:modelValue":t[3]||(t[3]=e=>s.newIdentity=e),placeholder:"请输入身份证号",style:{width:"61%"}},null,8,["modelValue"])])])),_:1},8,["modelValue"])],64)}var w=n(8073),V=n(144),C=n(1219),F={props:{passenger:Object},setup(e){const t=(0,V.KR)(""),n=(0,V.KR)(""),a=(0,V.KR)(""),s=async()=>{if(""!==t.value)if(""!==n.value)if(""!==a.value)try{const l=await w.Ay.post("/passenger/modify",{pid:e.passenger.pid,name:t.value,identity:n.value,phoneNum:a.value});"200"==l.data.code?((0,C.nk)({message:"修改成功！",type:"success"}),setTimeout((function(){location.reload()}),500)):("illegal identity"===l.data.msg&&(0,C.nk)({message:"请输入正确的身份证号",type:"warning"}),"illegal phone"===l.data.msg&&(0,C.nk)({message:"请输入正确的的手机号",type:"warning"}))}catch(l){(0,C.nk)({message:"修改失败",type:"error"})}else(0,C.nk)({message:"请输入电话号！",type:"warning"});else(0,C.nk)({message:"请输入身份证号！",type:"warning"});else(0,C.nk)({message:"请输入姓名！",type:"warning"})},o=(0,l.EW)((()=>{const t=e.passenger.identity.toString(),n=t.length;if(n<3)return t;const l=n-7,a="*".repeat(l);return t.substring(0,3)+a+t.substring(n-4)}));return{maskedIdentity:o,handleModify:s,newName:t,newPhone:a,newIdentity:n}}},_=n(1241);const I=(0,_.A)(F,[["render",L],["__scopeId","data-v-5a85c12d"]]);var A=I},7082:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});n(4114);var l=n(6768),a=n(144),s=n(8073),o=n(7488),i=n(5738),d=n(1219);const r=(0,l.Lk)("span",{class:"text-large font-600 mr-3"}," 乘车人信息 ",-1),u=(0,l.Lk)("div",{class:"mt-4 text-sm font-bold"},null,-1),c={key:1},p={class:"component"},g=(0,l.Lk)("div",{class:"component"},[(0,l.Lk)("hr",{style:{color:"#6b778c"}})],-1),k={class:"component"},m=(0,l.Lk)("span",{style:{"margin-right":"2%"}},[(0,l.eW)("请输入姓名："),(0,l.Lk)("span",{style:{color:"red"}},"*")],-1),y={class:"component"},v=(0,l.Lk)("span",{style:{"margin-right":"2%"}},[(0,l.eW)("请输入手机号："),(0,l.Lk)("span",{style:{color:"red"}},"*")],-1),f={class:"component"},h=(0,l.Lk)("span",{style:{"margin-right":"2%"}},[(0,l.eW)("请输入身份证号："),(0,l.Lk)("span",{style:{color:"red"}},"*")],-1);var b={__name:"Passengers",setup(e){const t=(0,a.KR)([]),n=(0,a.KR)(!1),b=(0,a.KR)(""),L=(0,a.KR)(""),w=(0,a.KR)("");(0,l.sV)((async()=>{if(""==o.Ay.getCookie("userId"))return void(0,d.nk)({message:"；灵异事件",type:"warning"});console.log(o.Ay.getCookie("userId"));const e=await s.Ay.get("/passenger/select/userId",{userId:o.Ay.getCookie("userId")});t.value=e.data,t.value.forEach((e=>{e.dialogVisible=!1})),console.log(t.value)}));const V=async()=>{try{const e=await s.Ay.post("/passenger/create",{phoneNum:L.value,userId:o.Ay.getCookie("userId"),identity:w.value,name:b.value});console.log(e.data),"create passenger success"==e.data.msg?(0,d.nk)({message:"创建成功！",type:"success"}):"passenger already exists"==e.data.msg&&(0,d.nk)({message:"该用户已存在！",type:"warning"}),setTimeout((function(){location.reload()}),500)}catch(e){(0,d.nk)({message:"创建失败",type:"error"})}};return(e,a)=>{const s=(0,l.g2)("el-page-header"),o=(0,l.g2)("NoIdentity"),d=(0,l.g2)("el-button"),C=(0,l.g2)("el-input"),F=(0,l.g2)("el-dialog"),_=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.Wv)(_,{style:{width:"70%"}},{default:(0,l.k6)((()=>[(0,l.bF)(s,{onClick:a[0]||(a[0]=t=>e.$router.push("/main"))},{content:(0,l.k6)((()=>[r])),default:(0,l.k6)((()=>[u])),_:1}),t.value.length>0?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(t.value,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.pid,style:{"margin-top":"3%"}},[(0,l.bF)(i.A,{passenger:e},null,8,["passenger"])])))),128)):((0,l.uX)(),(0,l.CE)("div",c,[(0,l.bF)(o)])),(0,l.Lk)("div",p,[(0,l.bF)(d,{style:{width:"100%"},onClick:a[1]||(a[1]=e=>n.value=!0)},{default:(0,l.k6)((()=>[(0,l.eW)(" + 点击添加乘车人")])),_:1})]),(0,l.bF)(F,{modelValue:n.value,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value=e)},{footer:(0,l.k6)((()=>[(0,l.bF)(d,{type:"default",onClick:a[5]||(a[5]=e=>n.value=!1)},{default:(0,l.k6)((()=>[(0,l.eW)("返回")])),_:1}),(0,l.bF)(d,{type:"primary",onClick:V},{default:(0,l.k6)((()=>[(0,l.eW)("添加乘车人")])),_:1})])),default:(0,l.k6)((()=>[g,(0,l.Lk)("div",k,[m,(0,l.bF)(C,{modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value=e),placeholder:"请输入名字",style:{width:"65%"}},null,8,["modelValue"])]),(0,l.Lk)("div",y,[v,(0,l.bF)(C,{modelValue:L.value,"onUpdate:modelValue":a[3]||(a[3]=e=>L.value=e),placeholder:"请输入手机号",style:{width:"63%"}},null,8,["modelValue"])]),(0,l.Lk)("div",f,[h,(0,l.bF)(C,{modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=e=>w.value=e),placeholder:"请输入身份证号",style:{width:"61%"}},null,8,["modelValue"])])])),_:1},8,["modelValue"])])),_:1})}}};const L=b;var w=L}}]);
//# sourceMappingURL=82.d234dc53.js.map