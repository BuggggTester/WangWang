{"version":3,"file":"js/711.9e5aaa72.js","mappings":"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","sources":["webpack://vue/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue/./src/util/time.js","webpack://vue/./src/views/TicketCard.vue","webpack://vue/./src/views/TicketCard.vue?fa89","webpack://vue/./src/views/TicketInfo.vue","webpack://vue/./src/views/TicketInfo.vue?fe7d"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","export function formatDate (d) {\r\n    var date = new Date(d);\r\n    var YY = date.getFullYear() + '-';\r\n    var MM =\r\n        (date.getMonth() + 1 < 10\r\n            ? '0' + (date.getMonth() + 1)\r\n            : date.getMonth() + 1) + '-';\r\n    var DD = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n    var hh =\r\n        (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\r\n    var mm =\r\n        (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) +\r\n        ':';\r\n    var ss =\r\n        date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();\r\n    return YY + MM + DD + ' ' + hh + mm + ss;\r\n}\r\n/*\r\n 函数名称：formatDate\r\n 功能：将中国标准时间转化为数据库中对应的Timestamp时间戳\r\n */\r\n/*\r\n    函数名称：stampToTime\r\n    功能：将时间戳转化成24小时制时间\r\n */\r\nexport function stampToTime(timestamp) {\r\n    const date = new Date(timestamp); // 使用时间戳创建Date对象\r\n    const hours = ('0' + date.getUTCHours()).slice(-2); // 获取小时并补零\r\n    const minutes = ('0' + date.getUTCMinutes()).slice(-2); // 获取分钟并补零\r\n\r\n\r\n     // 格式化时间，例如：04:00\r\n    return hours + ':' + minutes;\r\n}\r\nexport function formToDate(inputDate) {\r\n    const date = new Date(inputDate);\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${month}月${day}日`;\r\n}\r\n/*\r\n获取当前时间yyyy-mm-dd\r\n */\r\nexport function getCurrentTime() {\r\n    let today = new Date();\r\n    let year = today.getFullYear();\r\n    let month = today.getMonth() + 1; // 月份从0开始，需要加1\r\n    let day = today.getDate();\r\n\r\n    month = month < 10 ? '0' + month : month;\r\n    day = day < 10 ? '0' + day : day;\r\n\r\n    return `${year}-${month}-${day}`; // 输出 yyyy-MM-dd 格式的当前日期\r\n}\r\nexport default {\r\n    formatDate,\r\n    stampToTime,\r\n    formToDate,\r\n    getCurrentTime\r\n}","<template>\r\n  <div @click=\"goToTicketDetail\">\r\n    <el-card class=\"ticket-card\" shadow=\"dark\">\r\n      <div class=\"ticket-info\">\r\n        <el-row class=\"component\">\r\n          <el-col :span=\"6\" class=\"ticket-time\">{{ ticket.start_time }}</el-col>\r\n          <el-col :span=\"6\" class=\"trip-no\">\r\n            <div class=\"underline-container\">\r\n              <span class=\"underline-text\">{{ ticket.train_id }}</span>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\" class=\"ticket-time\">{{ ticket.end_time }}</el-col>\r\n          <el-col :span=\"6\" class=\"ticket-price\">￥{{ ticket.price }}起</el-col>\r\n        </el-row>\r\n        <el-row class=\"component\">\r\n          <el-col :span=\"6\" class=\"ticket-place\">\r\n            <span v-if=\"ticket.departureHighlight\" class=\"highlight-orange-text\">始</span>{{ props.ticket.from_place }}\r\n          </el-col>\r\n          <el-col :span=\"6\" class=\"time\">{{ props.ticket.duration }}</el-col>\r\n          <!--TODO: 等后端完善，传入时间属性-->\r\n          <el-col :span=\"6\" class=\"ticket-place\">\r\n            <span v-if=\"ticket.arrivalHighlight\" class=\"highlight-green-text\">终</span>{{ props.ticket.to_place }}\r\n          </el-col>\r\n          <el-col :span=\"6\" class=\"availability\" v-if=\"props.ticket.firstSeats == '有座' || props.ticket.secondSeats == '有座' \">有票</el-col>\r\n          <el-col :span=\"6\" class=\"unavailability\" v-else>无票</el-col>\r\n        </el-row>\r\n      </div>\r\n      <template #footer>\r\n        <el-row>\r\n          <el-col :span=\"8\">\r\n            <span style=\"align-items: center\">二等：<span style=\"color:#42b983\">{{ ticket.secondSeats }}</span></span>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <span style=\"align-items: center\">一等：<span style=\"color:#42b983\">{{ ticket.firstSeats }}</span></span>\r\n          </el-col>\r\n                <el-col :span=\"8\">\r\n                  <span style=\"align-items: center\">商务：<span style=\"color:#42b983\">有座</span></span>\r\n          </el-col>\r\n        </el-row>\r\n      </template>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {defineProps, onMounted, ref} from 'vue';\r\nimport {useRoute} from 'vue-router';\r\nimport requestUtil from '@/util/request'\r\nimport router from \"@/router\";\r\n\r\nconst route = useRoute();\r\nconst props = defineProps({\r\n  ticket: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n});\r\nconst duration = ref(\"\");\r\nconst goToTicketDetail = () => {\r\n  let param = {\r\n    \"trip_id\": props.ticket.trip_id,\r\n    \"fromPlace\": props.ticket.from_place,\r\n    \"toPlace\": props.ticket.to_place,\r\n    \"startTime\": route.query.startTime,\r\n    \"train_id\":props.ticket.train_id\r\n  };\r\n  router.push({path:'/TicketDetail',query: param});\r\n}\r\n\r\nonMounted(async () => {\r\n  const res2 = await requestUtil.get('/trip/sum', {\r\n    \"tripId\": props.ticket.trip_id,\r\n    \"fromPlace\": route.query.fromPlace,\r\n    \"toPlace\": route.query.toPlace\r\n\r\n  });\r\n  duration.value = res2.data.time;\r\n  console.log(res2.data);\r\n  console.log(duration.value);\r\n  const res3 = await requestUtil.get('/trip/minPrice', {\r\n    \"tripId\": props.ticket.trip_id,\r\n    \"fromPlace\": route.query.fromPlace,\r\n    \"toPlace\": route.query.toPlace\r\n  })\r\n  if(res2.data.firstSeats < 20) {\r\n    props.ticket.first_seat = res2.data.firstSeats;\r\n    props.ticket.firstSeats = res2.data.firstSeats + \"张\";\r\n  }else{\r\n    props.ticket.first_seat = res2.data.firstSeats;\r\n    props.ticket.firstSeats = \"有座\";\r\n  }\r\n  if(res2.data.secondSeats < 20) {\r\n    props.ticket.second_seat = res2.data.secondSeats;\r\n    props.ticket.secondSeats = res2.data.secondSeats + \"张\";\r\n  }else{\r\n    props.ticket.second_seat = res2.data.secondSeats;\r\n    props.ticket.secondSeats = \"有座\";\r\n  }\r\n  props.ticket.duration = res2.data.time;\r\n  props.ticket.price = res3.data.minPrice;\r\n})\r\nconsole.log(props.ticket.second_seat);\r\nconsole.log(props.ticket.first_seat);\r\n</script>\r\n\r\n<style scoped>\r\n.ticket-card {\r\n  width: 95%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ticket-info {\r\n  padding: 0px;\r\n}\r\n\r\n.ticket-time {\r\n  text-align: center;\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n}\r\n\r\n.ticket-price {\r\n  text-align: center;\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n  color: #ff8800;\r\n}\r\n\r\n.ticket-place {\r\n  text-align: center;\r\n  font-weight: bold;\r\n  font-size: 20px;\r\n}\r\n\r\n.time {\r\n  text-align: center;\r\n  color: gray;\r\n  font-size: 15px;\r\n}\r\n\r\n.availability {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #12a72b;\r\n}\r\n\r\n.unavailability {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #e11a1a;\r\n}\r\n\r\n.el-row {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-row:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.el-col {\r\n  border-radius: 4px;\r\n}\r\n\r\n.grid-content {\r\n  border-radius: 4px;\r\n  min-height: 36px;\r\n}\r\n\r\n.highlight-orange-text {\r\n  background-color: orange;\r\n  color: white;\r\n  padding: 1px 4px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.highlight-green-text {\r\n  background-color: green;\r\n  color: white;\r\n  padding: 1px 4px;\r\n  border-radius: 5px;\r\n\r\n}\r\n\r\n@import \"@/assets/css/card-order.css\";\r\n</style>\r\n\r\n\r\n  ","import script from \"./TicketCard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TicketCard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TicketCard.vue?vue&type=style&index=0&id=0044b928&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0044b928\"]])\n\nexport default __exports__","<template>\r\n    <el-page-header :icon=\"ArrowLeft\" @back=\"$router.push('/main')\">\r\n        <template #content>\r\n            <span class=\"head-trip-info\">{{ $route.query.fromPlace }} - {{ $route.query.toPlace }}</span>\r\n        </template>\r\n    </el-page-header>\r\n\r\n    <!-- <TicketCard v-for=\"(ticket, index) in tickets\" :key=\"index\" :ticket=\"ticket\" /> -->\r\n    <el-row>\r\n        <el-col :span=\"12\" v-for=\"(ticket, index) in ticketsInfo\" :key=\"index\">\r\n        <TicketCard :ticket=\"ticket\" />\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n\r\n<script setup>\r\n    import { ArrowLeft } from '@element-plus/icons-vue'\r\n    import router from \"@/router\";\r\n    import TicketCard from \"./TicketCard.vue\";\r\n    import timeUtil from '@/util/time';\r\n    import {onMounted, ref} from \"vue\";\r\n    import requestUtil from '@/util/request'\r\n    import {useRoute} from \"vue-router\";\r\n    const route = useRoute();\r\n    const fromPlace = ref(route.query.fromPlace);\r\n    const toPlace = ref(route.query.toPlace);\r\n    const startTime = ref(route.query.startTime);\r\n    const ticketsInfo = ref([]);\r\n    //TODO: 交互\r\n    onMounted(async()=> {\r\n      console.log(fromPlace.value);\r\n      console.log(toPlace.value);\r\n      console.log(startTime.value);\r\n      const res1 = await requestUtil.post('/trip/select/place/time', {\r\n          \"fromPlace\": fromPlace.value,\r\n          \"toPlace\": toPlace.value,\r\n          \"startTime\": startTime.value\r\n      })\r\n      ticketsInfo.value = res1.data;\r\n      ticketsInfo.value.forEach(item=> {\r\n        item.start_time = timeUtil.stampToTime(item.start_time);\r\n        item.end_time = timeUtil.stampToTime(item.end_time);\r\n      })\r\n      console.log(ticketsInfo.value);\r\n    })\r\n</script>\r\n\r\n<style scoped>\r\n    .head-trip-info{\r\n        margin-left :400px;\r\n        font-weight: bold;\r\n        font-size: 15px;\r\n    }\r\n</style>\r\n\r\n","import script from \"./TicketInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TicketInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TicketInfo.vue?vue&type=style&index=0&id=280bab5e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-280bab5e\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","formatDate","d","date","Date","YY","getFullYear","MM","getMonth","DD","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","stampToTime","timestamp","hours","getUTCHours","slice","minutes","getUTCMinutes","formToDate","inputDate","month","String","padStart","day","getCurrentTime","today","year","route","useRoute","__props","duration","ref","goToTicketDetail","param","ticket","trip_id","from_place","to_place","query","startTime","train_id","router","push","path","onMounted","async","res2","requestUtil","fromPlace","toPlace","value","data","time","console","log","res3","firstSeats","first_seat","secondSeats","second_seat","price","minPrice","__exports__","ticketsInfo","res1","forEach","item","start_time","timeUtil","end_time"],"sourceRoot":""}