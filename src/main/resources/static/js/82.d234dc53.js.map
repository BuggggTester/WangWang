{"version":3,"file":"js/82.d234dc53.js","mappings":"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","sources":["webpack://vue/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue/./src/util/cookie.js","webpack://vue/./src/views/IdentityCard.vue","webpack://vue/./src/views/IdentityCard.vue?a7cf","webpack://vue/./src/views/user/Passengers.vue","webpack://vue/./src/views/user/Passengers.vue?acbe"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","export function setCookie(name, value, days) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));\r\n    const expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = name + \"=\" + value + \";\" + expires + \";path=/\";\r\n}\r\n/*\r\n设置cookie\r\n */\r\nexport function getCookie(name) {\r\n    const cookieName = name + \"=\";\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n    const cookieArray = decodedCookie.split(';');\r\n    for (let i = 0; i < cookieArray.length; i++) {\r\n        let cookie = cookieArray[i];\r\n        while (cookie.charAt(0) === ' ') {\r\n            cookie = cookie.substring(1);\r\n        }\r\n        if (cookie.indexOf(cookieName) === 0) {\r\n            return cookie.substring(cookieName.length, cookie.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n/*\r\n获取cookie\r\n */\r\nexport function deleteCookie(cookieName) {\r\n    document.cookie = cookieName + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;';\r\n}\r\nexport function getCookieNum(){\r\n    const decodedCookie = decodeURIComponent(document.cookie);\r\n    const cookieArray = decodedCookie.split(';');\r\n    return cookieArray.length;\r\n}\r\nexport default {\r\n    setCookie,getCookie,getCookieNum,deleteCookie\r\n}","<template>\r\n  <el-card style=\"width: 100%\">\r\n    <div style=\"display: flex\">\r\n      <div style=\"width: 80%\">\r\n        <div class=\"component\">\r\n          <el-row>\r\n            <el-col :span=\"4\">\r\n              <span style=\"font-size: larger; color: #12a72b\">{{ passenger.name }}</span>\r\n            </el-col>\r\n            <!--            <div style=\"border-radius: 5px; border: 1px solid #6b778c; color: #6b778c\">学生</div>-->\r\n          </el-row>\r\n        </div>\r\n        <div class=\"component\">\r\n          <hr style=\"color: #6b778c\">\r\n        </div>\r\n        <div class=\"component\">\r\n          <el-row>\r\n            <span>手机号: {{ passenger.phone_number }}</span>\r\n          </el-row>\r\n        </div>\r\n        <div class=\"component\">\r\n          <el-row>\r\n            <span>身份证号: {{ maskedIdentity }}</span>\r\n          </el-row>\r\n        </div>\r\n      </div>\r\n      <div style=\"width: 20%; display: flex; justify-content: center; align-items: center;\">\r\n        <div @click=\"passenger.dialogVisible = true\">\r\n          <el-icon size=\"40px\" color=\"gray\"><EditPen /></el-icon>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n  <el-dialog v-model=\"passenger.dialogVisible\" title=\"修改乘车人信息\">\r\n    <div class=\"component\">\r\n    <hr style=\"color: #6b778c\">\r\n    </div>\r\n    <div class=\"component\">\r\n      <span style=\"margin-right: 2%\">请输入姓名：<span style=\"color: red\">*</span></span>\r\n      <el-input v-model=\"newName\" placeholder=\"请输入名字\" style=\"width: 65%;\"/>\r\n    </div>\r\n    <div class=\"component\">\r\n      <span style=\"margin-right: 2%\">请输入手机号：<span style=\"color: red\">*</span></span>\r\n      <el-input v-model=\"newPhone\" placeholder=\"请输入手机号\" style=\"width: 63%;\"/>\r\n    </div>\r\n    <div class=\"component\">\r\n      <span style=\"margin-right: 2%\">请输入身份证号：<span style=\"color: red\">*</span></span>\r\n      <el-input v-model=\"newIdentity\" placeholder=\"请输入身份证号\" style=\"width: 61%;\"/>\r\n    </div>\r\n    <template #footer>\r\n      <el-button @click=\"passenger.dialogVisible =false\" type=\"default\">返回</el-button>\r\n      <el-button @click=\"handleModify\" type=\"primary\">修改信息</el-button>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport requestUtil from \"@/util/request\";\r\nimport {computed, ref} from \"vue\";\r\nimport {ElMessage} from \"element-plus\";\r\nexport default {\r\n  props: {\r\n    passenger: Object\r\n  },\r\n  setup(props) {\r\n    const newName = ref(\"\");\r\n    const newIdentity = ref(\"\");\r\n    const newPhone = ref(\"\");\r\n    const handleModify = async() => {\r\n      if(newName.value === \"\") {\r\n        ElMessage({\r\n          message: \"请输入姓名！\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      if(newIdentity.value === \"\") {\r\n        ElMessage({\r\n          message: \"请输入身份证号！\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      if(newPhone.value === \"\") {\r\n        ElMessage({\r\n          message: \"请输入电话号！\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      try {\r\n        const res = await requestUtil.post('/passenger/modify', {\r\n          \"pid\": props.passenger.pid,\r\n          \"name\": newName.value,\r\n          \"identity\": newIdentity.value,\r\n          \"phoneNum\": newPhone.value,\r\n        })\r\n        if(res.data.code == \"200\") {\r\n          ElMessage({\r\n            message: \"修改成功！\",\r\n            type: \"success\"\r\n          })\r\n          setTimeout(function() {\r\n            location.reload();\r\n          }, 500);\r\n        }else{\r\n         if(res.data.msg === \"illegal identity\"){\r\n           ElMessage({\r\n             message: \"请输入正确的身份证号\",\r\n             type: \"warning\"\r\n           });\r\n         }\r\n         if(res.data.msg === \"illegal phone\") {\r\n           ElMessage({\r\n             message: \"请输入正确的的手机号\",\r\n             type: \"warning\"\r\n           });\r\n         }\r\n        }\r\n      }catch (e) {\r\n        ElMessage({\r\n          message: \"修改失败\",\r\n          type: \"error\"\r\n        })\r\n      }\r\n    }\r\n\r\n    // 计算身份证号码的掩码形式\r\n    const maskedIdentity = computed(() => {\r\n      // 将身份证号码转换为字符串\r\n      const identity = props.passenger.identity.toString();\r\n      // 获取身份证号码的长度\r\n      const length = identity.length;\r\n      // 如果身份证号码长度小于3，则返回原始身份证号码\r\n      if (length < 3) return identity;\r\n      // 获取需要替换为\"*\"的长度（身份证号码中间部分）\r\n      const replaceLength = length - 7;\r\n      // 构建掩码字符串\r\n      const maskedString = \"*\".repeat(replaceLength);\r\n      // 将身份证号码的中间部分替换为掩码字符串\r\n      return identity.substring(0, 3) + maskedString + identity.substring(length - 4);\r\n    });\r\n\r\n    return {\r\n      maskedIdentity,\r\n      handleModify,\r\n      newName,\r\n      newPhone,\r\n      newIdentity\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n@import \"@/assets/css/basic.css\";\r\n</style>","import { render } from \"./IdentityCard.vue?vue&type=template&id=5a85c12d&scoped=true\"\nimport script from \"./IdentityCard.vue?vue&type=script&lang=js\"\nexport * from \"./IdentityCard.vue?vue&type=script&lang=js\"\n\nimport \"./IdentityCard.vue?vue&type=style&index=0&id=5a85c12d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5a85c12d\"]])\n\nexport default __exports__","<template>\r\n  <el-card style=\"width: 70%;\">\r\n    <el-page-header @click=\"$router.push('/main')\">\r\n      <template #content>\r\n        <span class=\"text-large font-600 mr-3\"> 乘车人信息 </span>\r\n      </template>\r\n      <div class=\"mt-4 text-sm font-bold\">\r\n      </div>\r\n    </el-page-header>\r\n    <div v-if=\"passengers.length > 0\" v-for=\"passenger in passengers\" :key=\"passenger.pid\" style=\"margin-top: 3%\">\r\n      <IdentityCard :passenger=\"passenger\"/>\r\n    </div>\r\n    <div v-else>\r\n      <NoIdentity/>\r\n    </div>\r\n    <div class=\"component\">\r\n      <el-button style=\"width: 100%;\" @click=\"addVisible = true\"> + 点击添加乘车人</el-button>\r\n    </div>\r\n    <el-dialog v-model=\"addVisible\">\r\n      <div class=\"component\">\r\n        <hr style=\"color: #6b778c\">\r\n      </div>\r\n      <div class=\"component\">\r\n        <span style=\"margin-right: 2%\">请输入姓名：<span style=\"color: red\">*</span></span>\r\n        <el-input v-model=\"newName\" placeholder=\"请输入名字\" style=\"width: 65%;\"/>\r\n      </div>\r\n      <div class=\"component\">\r\n        <span style=\"margin-right: 2%\">请输入手机号：<span style=\"color: red\">*</span></span>\r\n        <el-input v-model=\"newPhone\" placeholder=\"请输入手机号\" style=\"width: 63%;\"/>\r\n      </div>\r\n      <div class=\"component\">\r\n        <span style=\"margin-right: 2%\">请输入身份证号：<span style=\"color: red\">*</span></span>\r\n        <el-input v-model=\"newIdentity\" placeholder=\"请输入身份证号\" style=\"width: 61%;\"/>\r\n      </div>\r\n      <template #footer>\r\n        <el-button type=\"default\" @click=\"addVisible = false\">返回</el-button>\r\n        <el-button type=\"primary\" @click=\"addPassenger\">添加乘车人</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </el-card>\r\n</template>\r\n<script setup>\r\n\r\nimport {onMounted, ref} from \"vue\";\r\nimport requestUtil from \"@/util/request\"\r\nimport cookieUtil from \"@/util/cookie\"\r\nimport IdentityCard from \"@/views/IdentityCard.vue\";\r\nimport {ElMessage} from \"element-plus\";\r\nconst passengers = ref([]);\r\nconst addVisible = ref(false);\r\nconst newName = ref(\"\");\r\nconst newPhone = ref(\"\");\r\nconst newIdentity = ref(\"\");\r\nonMounted(async () => {\r\n  if(cookieUtil.getCookie(\"userId\") == \"\") {\r\n    ElMessage({\r\n      message: \"；灵异事件\",\r\n      type: \"warning\"\r\n    });\r\n    return;\r\n  }\r\n  console.log(cookieUtil.getCookie(\"userId\"));\r\n  const res = await requestUtil.get('/passenger/select/userId', {\r\n    \"userId\": cookieUtil.getCookie(\"userId\")\r\n  })\r\n  passengers.value = res.data;\r\n  passengers.value.forEach(item=> {\r\n    item.dialogVisible = false;\r\n  })\r\n  console.log(passengers.value);\r\n})\r\nconst addPassenger = async() => {\r\n  try {\r\n    const res = await requestUtil.post(\"/passenger/create\", {\r\n      \"phoneNum\": newPhone.value,\r\n      \"userId\": cookieUtil.getCookie(\"userId\"),\r\n      \"identity\": newIdentity.value,\r\n      \"name\": newName.value\r\n    })\r\n    console.log(res.data);\r\n    if(res.data.msg == \"create passenger success\") {\r\n      ElMessage({\r\n        message: \"创建成功！\",\r\n        type: \"success\"\r\n      })\r\n    } else if(res.data.msg == \"passenger already exists\") {\r\n      ElMessage({\r\n        message: \"该用户已存在！\",\r\n        type: \"warning\"\r\n      })\r\n    }\r\n    setTimeout(function() {\r\n      location.reload();\r\n    },500);\r\n  }catch (e) {\r\n    ElMessage({\r\n      message: \"创建失败\",\r\n      type: \"error\"\r\n    })\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./Passengers.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Passengers.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","setCookie","name","value","days","d","Date","setTime","getTime","expires","toUTCString","document","cookie","getCookie","cookieName","decodedCookie","decodeURIComponent","cookieArray","split","i","length","charAt","substring","indexOf","deleteCookie","getCookieNum","style","class","_createElementVNode","_createTextVNode","_createElementBlock","_Fragment","_createVNode","_component_el_card","default","_withCtx","_hoisted_1","_hoisted_2","_hoisted_3","_component_el_row","_component_el_col","span","_hoisted_4","_toDisplayString","$props","passenger","_","_hoisted_5","_hoisted_6","phone_number","_hoisted_7","$setup","maskedIdentity","_hoisted_8","onClick","_cache","$event","dialogVisible","_component_el_icon","size","color","_component_EditPen","_component_el_dialog","modelValue","title","footer","_component_el_button","type","handleModify","_hoisted_9","_hoisted_10","_hoisted_11","_component_el_input","newName","placeholder","_hoisted_12","_hoisted_13","newPhone","_hoisted_14","_hoisted_15","newIdentity","Object","setup","ref","async","res","requestUtil","pid","data","code","ElMessage","message","setTimeout","location","reload","msg","e","computed","identity","toString","replaceLength","maskedString","repeat","__exports__","render","passengers","addVisible","onMounted","cookieUtil","console","log","forEach","item","addPassenger"],"sourceRoot":""}